var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");


define("layouts/visual-single-sound",["require","exports","module","views/sound/visual-sound-container","lib/views/single-sound"],function(a,b,c){var d,e=a("views/sound/visual-sound-container"),f=a("lib/views/single-sound");d=c.exports=f.extend({SoundView:e})}),
define("views/sound/visual-sound-container",["require","exports","module","lib/audiomanager","config","vendor/experiments/experiments","lib/views/mixins/has-teaser","lib/views/mixins/has-ad-state","views/sound/offer-related-sounds","lib/play-manager","views/sound/related-sounds-title","views/sound/related-visual-sounds","lib/views/mixins/responsive","models/sound","lib/view","views/sound/visual-audible","views/sound/visual-sound-container.css","views/sound/visual-sound-container.tmpl"],function(a,b,c){function r(a){a=a?"on":"off",k[a]("play",s,this)[a]("pause",t,this)[a]("finish",u,this)[a]("change:current",v,this)}function s(){this.model.areRelatedSoundsEnabled().done(y.bind(this)),this.toggleTeaser(!1),this.toggleState("related",!1).toggleState("offerRelated",!1)}function t(a){var b=a.audio&&a.audio.controller;if(b&&b.getState()===e.States.ENDED)return;this.model.areRelatedSoundsEnabled().done(function(){this.teaserCanBeDisplayed()?this.toggleTeaser(!0):this.toggleState("related",!0)}.bind(this))}function u(a){var b=this.subviews.relatedSounds&&this.subviews.relatedSounds.collection,c=g.get("widget_listening","after_first_track")==="play-more-like-this-button"?"offerRelated":"related";a===this.model?this.model.areRelatedSoundsEnabled().done(function(){this.teaserCanBeDisplayed()?(this.relatedToShowAfterTeaser=c,this.toggleTeaser(!0)):this.toggleState(c,!0)}.bind(this)):a===b&&this.toggleState(c,!0)}function v(a){var b=a.current,c=a.prev;b&&w.call(this,b),c&&c.seek(0)}function w(a){var b=this.subviews.visualAudible,c=x(a);this.removeSubview(b),this.addSubview(c.render(),"visualAudible"),c.whenInserted().done(function(){c.$el.removeClass("animate"),this.addDeferred(setTimeout(b._dispose.bind(b),1e3))}.bind(this)),c.$el.addClass("animate g-transition-transform").appendTo(this.$$("sound")),this.toggleState("related",!1)}function x(a){return new q({resource_id:a.resource_id,resource_type:a.resource_type})}function y(){var a=this.subviews.relatedSounds,b;a||(a=new m({resource_id:this.model.id}),a.on(m.Events.ITEM_CLICKED,A,this),a.render(),this.addSubview(a,"relatedSounds"),b=a.collection,b.fetch().done(z.bind(this,b))),this.$$("related").append(a.el)}function z(a){var b=new l({resource_id:this.model.resource_id,own_sounds:a.hasOwnSounds});this.$$("related").prepend(b.render().el)}function A(a,b){k.setSource(b,{continuousPlay:f.get("widgetParams").continuous_play}),k.play(a,{userAction:!0})}function B(a){var b=this.subviews.visualAudible,c,d,e,f;a&&(y.call(this),this.toggleTeaser(!1)),c=this.subviews.relatedSounds,e=c&&c.collection,b&&b.toggleBackgroundState(a),a&&(d=k.getCurrentSound(),e&&d&&(f=e.models.slice(0,e.indexOf(d)+1),f.forEach(c.removeListItem.bind(c))),c.getListItemWrappers().length||c.rerender()),this.toggleState("relatedVisible",a)}function C(){var a=this.subviews.offerRelated;a||(a=new j({resource_id:this.model.id}),a.on(j.Events.CLICKED,A,this),a.render(),this.addSubview(a,"offerRelated")),this.$el.append(a.el)}function D(a){var b=this.subviews.visualAudible;b&&b.toggleBackgroundState(a),a&&(this.toggleTeaser(!1),C.call(this)),this.toggleState("offerRelatedVisible",a)}function E(a){var b=this.subviews.visualAudible;b&&(b.toggleBackgroundState(a),b.toggleState("adBackground",a))}var d,e=a("lib/audiomanager"),f=a("config"),g=a("vendor/experiments/experiments"),h=a("lib/views/mixins/has-teaser"),i=a("lib/views/mixins/has-ad-state"),j=a("views/sound/offer-related-sounds"),k=a("lib/play-manager"),l=a("views/sound/related-sounds-title"),m=a("views/sound/related-visual-sounds"),n=a("lib/views/mixins/responsive"),o=a("models/sound"),p=a("lib/view"),q=a("views/sound/visual-audible");d=c.exports=p.extend(h,n,i,{className:"visualSoundContainer g-box-full",css:a("views/sound/visual-sound-container.css"),template:a("views/sound/visual-sound-container.tmpl"),ModelClass:o,relatedToShowAfterTeaser:null,states:{related:B,offerRelated:D},setup:function(){r.call(this,!0)},dispose:function(){r.call(this,!1)},onWindowSizeChange:function(a,b){f.set("adsDisabled",b.width<325||b.height<360)},onAdStart:function(){E.call(this,!0)},onAdFinish:function(){E.call(this,!1)},toggleTeaser:function(a){a&&(this.toggleState("offerRelated",!1),this.toggleState("related",!1)),this.toggleTeaserView(a)},onTeaserDismiss:function(){this.relatedToShowAfterTeaser&&this.addDeferred(setTimeout(function(){this.toggleState(this.relatedToShowAfterTeaser,!0),this.relatedToShowAfterTeaser=null}.bind(this),this.TEASER_TRANSITION_DURATION*1.5))}})}),
define("lib/views/single-sound",["require","exports","module","config/error-messages","lib/views/mixins/audio-ad-prefetch","models/sound","lib/view","lib/views/mixins/widget-container","lib/views/single-sound.css"],function(a,b,c){var d,e=a("config/error-messages"),f=a("lib/views/mixins/audio-ad-prefetch"),g=a("models/sound"),h=a("lib/view"),i=a("lib/views/mixins/widget-container");d=c.exports=h.extend(i,f,{ModelClass:g,SoundView:null,css:a("lib/views/single-sound.css"),className:"singleSound g-box-full",template:function(){return""},defaults:{resource_id:null,resource_type:null},renderDecorate:function(){var a=this.subviews.sound;a||(a=this.addSubview(new this.SoundView(this.options),"sound")),this.$el.empty().append(a.render().el)},getFetchErrorMessage:function(){return e.SOUND_NOT_FOUND}})}),
define("lib/views/mixins/has-teaser",["require","exports","module","vendor/experiments/experiments","lib/mixin","views/sound/teaser"],function(a,b,c){function i(){var a=this.subviews.teaser;a||(a=new g({resource_id:this.options.resource_id,resource_type:this.options.resource_type,hasCountDown:this.teaserHasCountDown}),a.on(g.Events.DISMISS,j,this),a.render(),this.addSubview(a,"teaser"),this.$$("teaser").append(a.el))}function j(){this.toggleTeaserView(!1),this.onTeaserDismiss()}function k(){var a=this.subviews.visualAudible;this._hideTeaserTimeoutId&&clearTimeout(this._hideTeaserTimeoutId),i.call(this),a&&(a.toggleBackgroundState(!0),a.toggleState("onlyArtwork",!0)),this.$el.toggleClass("teaserVisible",!0)}function l(){var a=this.subviews.visualAudible,b=this.subviews.teaser;if(!b)return;a.toggleBackgroundState(!1),b.scaleUpArtwork(Math.max(this.$el.height()-a.$el.height(),0)),this._hideTeaserTimeoutId=this.addDeferred(setTimeout(function(){a.toggleState("onlyArtwork",!1),b._dispose(),this.removeSubview(b),this.$el.toggleClass("teaserVisible",!1)}.bind(this),this.TEASER_TRANSITION_DURATION))}var d,e=a("vendor/experiments/experiments"),f=a("lib/mixin"),g=a("views/sound/teaser"),h=!1;d=c.exports=new f({TEASER_TRANSITION_DURATION:200,defaults:{onTeaserDismiss:$.noop,teaserHasCountDown:!1},toggleTeaserView:function(a){a?this.teaserCanBeDisplayed()&&(k.call(this),h=!0):l.call(this)},teaserCanBeDisplayed:function(){return!h&&e.get("widget_listening","show_teaser_50")==="true"}})}),
define("lib/views/mixins/has-ad-state",["require","exports","module","lib/ad-manager","lib/mixin"],function(a,b,c){function h(a){a=a?"one":"off",e[a]("ad:play",i,this)[a]("ad:skip ad:finish",j,this)}function i(){if(this.disposed)return;this.$el.toggleClass(g,!0),this.toggleState(g,!0),this.onAdStart(e.getCurrentSound())}function j(){if(this.disposed)return;this.$el.toggleClass(g,!1),this.toggleState(g,!1),this.onAdFinish()}var d,e=a("lib/ad-manager"),f=a("lib/mixin"),g="adState";d=c.exports=new f({defaults:{onAdStart:$.noop,onAdFinish:$.noop},after:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}}})}),
define("views/sound/offer-related-sounds",["require","exports","module","collections/own-related-sounds","lib/views/mixins/responsive","lib/view","views/sound/offer-related-sounds.tmpl","views/sound/offer-related-sounds.css"],function(a,b,c){function i(a){a.preventDefault(),this.trigger(h.CLICKED,this.collection.first(),this.collection)}var d,e=a("collections/own-related-sounds"),f=a("lib/views/mixins/responsive"),g=a("lib/view"),h={CLICKED:"offerRelatedSounds:clicked"};d=c.exports=g.extend(f,{template:a("views/sound/offer-related-sounds.tmpl"),css:a("views/sound/offer-related-sounds.css"),className:"offerRelatedSounds g-transition-opacity",events:{click:i},setup:function(){this.collection=new e(null,{resource_id:this.options.resource_id})},getTemplateData:function(a){var b=this.collection.first();a.nextSound=b.toJSON(),a.nextArtwork=b.get("artwork_url")}},{Events:h})}),
define("views/sound/related-sounds-title",["require","exports","module","config","models/sound","lib/view","views/sound/related-sounds-title.tmpl"],function(a,b,c){var d,e=a("config"),f=a("models/sound"),g=a("lib/view");d=c.exports=g.extend({template:a("views/sound/related-sounds-title.tmpl"),className:"relatedSoundsTitle sc-truncate sc-text-verylight",ModelClass:f,requiredAttributes:["user","title","permalink_url"],defaults:{own_sounds:!1},getTemplateData:function(a){var b=e.get("widgetParams").continuous_play,c,d,f;return this.options.own_sounds?(c=b?"Play more tracks by":"Play another track by",f=a.user.permalink_url,d=a.user.username):(c=b?"Play more tracks like":"Play another track like",f=a.permalink_url,d=a.title),{prefix:c,linkText:d,linkHref:f}}})}),
define("views/sound/related-visual-sounds",["require","exports","module","lib/views/list","collections/own-related-sounds","views/sound/visual-sound-badge","lib/window-events","views/sound/related-visual-sounds.css"],function(a,b,c){function n(a){a.preventDefault();var b=this.getListItemViewByEvent(a);b&&this.trigger(m.ITEM_CLICKED,b.model,this.collection)}function o(){var a=p.call(this);this.$el.css({"max-height":a.height}),this.$(this.getListItemSelector()).each(function(b,c){c.style.width=a.width,c.style.height=a.height})}function p(){var a=this.$el.width(),b=Math.ceil(a/j),c=Math.floor((a-(b-1)*i)/b);return{width:c+"px",height:Math.min($(window).height()-(this.$el.position().top+k+l),c)+"px"}}var d,e=a("lib/views/list"),f=a("collections/own-related-sounds"),g=a("views/sound/visual-sound-badge"),h=a("lib/window-events"),i=10,j=200,k=60,l=40,m={ITEM_CLICKED:"relatedVisualSounds:clicked"};d=c.exports=e.extend({className:"relatedVisualSounds sc-clearfix",itemClassName:"relatedVisualSounds__item sc-pointer",css:a("views/sound/related-visual-sounds.css"),Subview:g,defaults:{maxDisplay:0},events:{click:n},setup:function(){this.collection=new f(null,{resource_id:this.options.resource_id}),this.collection.setLimit(20),h.on("resize:debounced",o,this)},dispose:function(){h.off("resize:debounced",o,this)},renderDecorate:function(){e.prototype.renderDecorate.apply(this,arguments),this.whenInserted().done(o.bind(this))},getListItemAttributes:function(){return{style:p.call(this)}}},{Events:m})}),
define("lib/views/mixins/responsive",["require","exports","module","_","config/sizes","config","lib/event-bus","lib/mixin","lib/backbone"],function(a,b,c){function o(a){var b=a?"on":"off";k[b]("change",r,this),h[b]("layout:change",p,this)}function p(){q(),r.call(this)}function q(){k.set({width:n.width(),height:n.height()})}function r(){s.call(this),this.onWindowSizeChange(t(),{width:this.getWindowWidth(),height:this.getWindowHeight()})}function s(){var a=t(),b;Object.keys(f).forEach(function(c){b=f[c],b!==f.DEFAULT&&this.toggleState("state-"+b,b===a)},this)}function t(){if(!u())return f.DEFAULT;var a=k.get("width"),b;return a<=l?b=f.SMALL:a<m?b=f.MEDIUM:b=f.DEFAULT,b}function u(){return!!g.get("router").layoutName}var d,e=a("_"),f=a("config/sizes"),g=a("config"),h=a("lib/event-bus"),i=a("lib/mixin"),j=a("lib/backbone"),k=new j.Model,l=250,m=400,n=$(window);d=c.exports=new i({before:{setup:function(){o.call(this,!0)},renderDecorate:function(){this.whenInserted().done(p.bind(this))},dispose:function(){o.call(this,!1)}},defaults:{onWindowSizeChange:function(){},getWindowHeight:function(){return k.has("height")?k.get("height"):n.height()},getWindowWidth:function(){return k.has("width")?k.get("width"):n.width()},getWindowSize:t}}),n.on("resize",e.debounce(q,50))}),
define("views/sound/visual-audible",["require","exports","module","_","lib/animation","views/sound/artwork-waveform","lib/browser","lib/canvas","vendor/color/color","lib/views/mixins/has-ad-state","lib/helpers/image-helper","lib/views/mixins/multi-resource-type","lib/play-manager","lib/promoted","lib/support","lib/view","views/sound/waveform","views/sound/visual-audible.css","views/sound/visual-audible.tmpl"],function(a,b,c){function t(a){var b=a?"on":"off";n[b]("play",v,this)[b]("pause",w,this)[b]("finish",x,this)[b]("change:current",y,this)}function u(){var a=n.getCurrentSound(),b=a&&a.isPlaying();O.call(this,!b),this.toggleState("playing",b)}function v(){u.call(this),z.call(this)}function w(){H.call(this,!1)}function x(){H.call(this,!1)}function y(){z.call(this)}function z(){var a=n.getCurrentSound();a&&(this.isSound||a.isPlaying())&&A.call(this,a)}function A(a){var b=this.subviews.waveform,c=!1,d;if(this._isInsertingWaveform||b&&b.model===a)return;this._isInsertingWaveform=!0,d=C.call(this,a),d.$el.addClass("hidden g-all-transitions-200"),d.render(),this.whenRendered().done(function(){this.$$("waveform").append(d.el)}.bind(this)),d.whenInserted().done(function(){if(b&&b.disposed)return;f.fadeOut(b?b.$el:this.$$("total")).progress(function(a){!c&&a>=.4&&(c=!0,d.$el.removeClass("hidden"))}).done(B.bind(this,d))}.bind(this)).done(function(){if(this.model.hasVisuals&&this.model.hasVisuals())return;K.call(this,d,10).done(function(a,b){b&&b instanceof g&&(b=b.subviews.waveform);if(b){var c=j(a).diff(b.getColor()).brightness>s;c||b.toggleAltColor()}})}.bind(this))}function B(a){var b=this.subviews.waveform;b&&(this.removeSubview(b),b._dispose()),this.addSubview(a,"waveform"),this._isInsertingWaveform=!1}function C(a){var b=this.isSound?r:g;return new b({resource_id:a.resource_id,resource_type:a.resource_type,visual:!0})}function D(a){if(this.getState("ad"))return;if($(a.target).closest(".artworkWaveform, .waveform").length)return;var b=n.getCurrentSound();b&&n.toggle(b,{userAction:!0,view:"visual-audible"}),G.call(this,!0)}function E(){H.call(this,!0),G.call(this,!0)}function F(){H.call(this,!1),G.call(this,!1)}function G(a){var b=I.call(this);this.toggleState("highlight",a),b&&b.toggleState("hover",a)}function H(a){var b=n.getCurrentSound(),c=b&&b.isPlaying(),d=this.getState("background"),e=this.model.hasVisuals&&this.model.hasVisuals();!c||d||!e?this.toggleState("minimal",!1):this.toggleState("minimal",!a)}function I(){var a=this.subviews.waveform;return a&&a instanceof g&&(a=a.subviews.waveform),a}function J(){var a=$.Deferred();return this.whenReady().pipe(function(a){return a.subviews.header.whenReady()}).pipe(function(a){return a.subviews.logo.whenReady()}).pipe(a.resolve),a}function K(a,b){var c=$.Deferred(),d=this.$$("artwork")[0],e=new i({width:d.offsetWidth,height:d.offsetHeight}),f=l.urlFrom(this.model.attributes,500);return L(e,f).done(function(){if(this.disposed)return;var f=a.el.getBoundingClientRect(),g=d.getBoundingClientRect(),h,i,j;h=e.getImageData({x:Math.round(f.left-g.left),y:f.top},{x:Math.round(f.right-g.left),y:f.bottom}),i=l.getMainColor(h,b),j="rgb("+i.join(",")+")",c.resolve(j,a)}.bind(this)),c}function L(a,b){function d(b){var c=Math.max(a.width,a.height)/b.width,d=0,e=0,f=b.width,g=b.height,h=f*c,i=g*c,j=(a.width-h)/2,k=(a.height-i)/2;a.drawImage(b,d,e,f,g,j,k,h,i)}var c=$.Deferred();return p.corsImg?(l.load(b,!0).pipe(d).pipe(c.resolve),c):c.reject()}function M(){O.call(this,!1)}function N(){O.call(this,!0)}function O(a){this.$$("artwork").toggleClass("sc-pointer",a)}var d,e=a("_"),f=a("lib/animation"),g=a("views/sound/artwork-waveform"),h=a("lib/browser"),i=a("lib/canvas"),j=a("vendor/color/color"),k=a("lib/views/mixins/has-ad-state"),l=a("lib/helpers/image-helper"),m=a("lib/views/mixins/multi-resource-type"),n=a("lib/play-manager"),o=a("lib/promoted"),p=a("lib/support"),q=a("lib/view"),r=a("views/sound/waveform"),s=20;d=c.exports=q.extend(m,k,{className:"visualAudible",css:a("views/sound/visual-audible.css"),template:a("views/sound/visual-audible.tmpl"),states:{background:"background",minimal:"minimal",onlyArtwork:"onlyArtwork"},_isInsertingWaveform:null,events:{mouseenter:E,mouseleave:F,"click .visualAudible__artwork, .visualAudible__footer":D},requiredAttributes:{sound:["visuals"]},setup:function(){t.call(this,!0),this.toggleState("mobile",h.isMobile)},dispose:function(){t.call(this,!1)},renderDecorate:function(){var a=this.model.hasVisuals&&this.model.hasVisuals();z.call(this),u.call(this),a||this.correctLogoColor(),o.trackEvent("impression",this.model.toJSON())},correctLogoColor:function(){J.call(this).pipe(K.bind(this)).pipe(function(a,b){var c=j(a).diff(b.getColor()).brightness>s;c||b.toggleAltColor()})},toggleBackgroundState:function(a){this.toggleState("background",a),this.subviews.visuals&&this.subviews.visuals.toggleState("background",a)},getTemplateData:function(a){return e.extend(a,{is_sound:this.isSound,has_visuals:this.model.hasVisuals&&this.model.hasVisuals()})},onAdStart:M,onAdStop:N})}),
define("views/sound/visual-sound-container.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualSoundContainer{position:fixed;top:0;left:0}.visualSoundContainer__sound>.visualAudible{position:absolute;top:0;left:0;-webkit-transform:translate3d(0,0,0)}.visualSoundContainer__sound>.visualAudible.animate{-webkit-transform:translate3d(100%,0,0)}.visualSoundContainer__teaser{position:absolute;right:0;bottom:0;left:0;top:0;opacity:0;pointer-events:none}.visualSoundContainer.teaserVisible .visualSoundContainer__teaser{opacity:1;pointer-events:auto}.visualSoundContainer__related{position:absolute;right:0;bottom:0;left:0;padding:20px 12px;-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.visualSoundContainer__related>.relatedSoundsTitle{margin-bottom:5px}.visualSoundContainer.relatedVisible .visualSoundContainer__related{-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.visualSoundContainer .offerRelatedSounds{opacity:0}.visualSoundContainer.offerRelatedVisible .offerRelatedSounds{opacity:1}.visualSoundContainer .adContainer{position:absolute;right:0;left:0;top:0;bottom:0;-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:hidden}.visualSoundContainer .adContainer>*{visibility:visible}.visualSoundContainer.adState .adContainer{-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visual-sound-container.tmpl",["vendor/handlebars-runtime","views/sound/visual-audible","views/ads/ad-container"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="visualSoundContainer__sound"> ',g="views/sound/visual-audible",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="visualAudible",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div>\n<div class="visualSoundContainer__related g-transition-transform"></div>\n<div class="visualSoundContainer__teaser g-transition-opacity"></div>\n',g="views/ads/ad-container",h=c.$view,g=h.call(b,g,{hash:{}}),f+=m(g)+" ",f})}),
define("lib/views/mixins/audio-ad-prefetch",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/mixin"],function(a,b,c){function i(){var a=$.Deferred();return e.get("widgetReady")?a.resolve():g.one("widget:ready",a.resolve),g.on("exception",a.resolve),a}function j(){f.prefetchCurrentSoundAudioAd()}var d,e=a("config"),f=a("lib/play-manager"),g=a("lib/event-bus"),h=a("lib/mixin");d=c.exports=new h({after:{setup:function(){this.addDeferred(i().then(function(){this.$el.one("mouseenter",j)}.bind(this)))}}})}),
define("lib/views/mixins/widget-container",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/browser","lib/views/mixins/responsive","lib/mixin","models/audible-interface","models/exception"],function(a,b,c){function m(){var a=q.call(this),b=e.get("widgetParams");if(a instanceof k&&!a.isEmbeddable()){o(a);return}f.setSource(q.call(this)).setCursor(b.start_track),b.auto_play&&!h.isMobileSafari&&!h.isAndroid&&f.play(f.getCurrentSound()),g.trigger("widget:ready")}function n(a){var b=this.getFetchErrorMessage(a);b&&p(b)}function o(a){var b,c=a.get("permalink_url");b="This "+a.resource_type+" canâ€™t be played outside of SoundCloud",!a.isPrivate()&&c&&(b+='<br/><a href="'+c+'">Play on SoundCloud</a>'),p(b)}function p(a){l.raise({fatal:!0,message:a})}function q(){return this.collection||this.model}var d,e=a("config"),f=a("lib/play-manager"),g=a("lib/event-bus"),h=a("lib/browser"),i=a("lib/views/mixins/responsive"),j=a("lib/mixin"),k=a("models/audible-interface"),l=a("models/exception");d=c.exports=new j({applyTo:function(a){i.applyTo(a)},defaults:{getFetchErrorMessage:$.noop},after:{setup:function(){var a=q.call(this);f.setSource(a),a.fetch().done(m.bind(this)).fail(n.bind(this))}}})}),
define("lib/views/single-sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".singleSound{border-radius:3px;overflow:hidden}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/teaser",["require","exports","module","models/audible","lib/browser","lib/views/mixins/responsive","config/sizes","lib/view","views/sound/teaser.tmpl","views/sound/teaser.css"],function(a,b,c){function o(){return f.isMobile&&(f.isiOS||f.isAndroid)}function p(){this.options.hasCountDown&&(this._leftSecondsToClose=n,q.call(this)),this.toggleState("visible",!0)}function q(){if(this.disposed)return;this._leftSecondsToClose-=1,this.$$("countdown").text(this._leftSecondsToClose),this._leftSecondsToClose>0?setTimeout(q.bind(this),1e3):s.call(this)}function r(){this.trigger(m.DOWNLOAD_CLICK,this,{ios:this.getState("ios"),android:this.getState("android")})}function s(){this.trigger(m.DISMISS,this)}function t(a){var b=a&&a===h.SMALL,c=b?15:35,d=b?10:30,e=b?10:40,f=b?15:20,g=100,i=this.$$("text").height(),j=this.$$("button").height(),k=this.$el.width(),l=this.$el.height(),m=k-e*2,n=Math.min(m,l-c-d-j-i-f*3),o=(l-n)/2,p=o,q=n>=g,r=Math.max(c,o-f-i),s=p-f-j-l/20;q?this.$$("artwork").removeClass("g-all-transitions-200").css({top:o,left:e,right:e,bottom:p}):(r+=n/2+f,s+=n/2),this.toggleState("artworkHidden",!q),this.$$("text").css({top:r,left:e,right:e}),this.$$("button").css({left:e,right:e,bottom:s}),this.$$("timer").css({right:5,bottom:3})}function u(a){this.$$("artwork").addClass("g-all-transitions-200").css({top:0,left:0,right:0,bottom:a||0})}var d,e=a("models/audible"),f=a("lib/browser"),g=a("lib/views/mixins/responsive"),h=a("config/sizes"),i=a("lib/view"),j="https://web.archive.org/web/20141112015650/http://app.adjust.io/ebzms9",k="market://details?id=com.soundcloud.android&referrer=utm_source%3Dsoundcloud%26Dutm_medium%3Dwidget",l=k+"%26utm_campaign%3Dwidget_upsell",m={DISMISS:"teaser:dismiss",DOWNLOAD_CLICK:"teaser:download-click"},n=15;d=c.exports=i.extend(g,{template:a("views/sound/teaser.tmpl"),css:a("views/sound/teaser.css"),ModelClass:e,className:"teaser",defaults:{hasCountDown:!1},_leftSecondsToClose:0,events:{"click .teaser__dismiss":s,"click .teaser__buttin":r},requiredAttributes:["title"],setup:function(){var a=o();this.toggleState("mobile",a).toggleState(f.isiOS?"ios":"android",a)},renderDecorate:function(){this.whenInserted().done(p.bind(this))},onWindowSizeChange:t,scaleUpArtwork:u,getTemplateData:function(a){return a.isiOS=f.isiOS,a.link=o()?f.isiOS?j:l:a.user.permalink_url,a.hasCountDown=this.options.hasCountDown,a}},{Events:m})}),
define("collections/own-related-sounds",["require","exports","module","_","models/user","models/sound","collections/user-sounds","collections/related-sounds","collections/spotlight-sounds"],function(a,b,c){function m(a){function h(){return i.prototype.fetch.call(c,a).fail(b.reject).done(b.resolve)}var b=$.Deferred(),c=this,d=c.options.resource_id;return a=a?e.clone(a):{},g.getUserBySoundId(d).done(function(e){e.getPlan()===f.Plans.PRO_UNLIMITED?c.isFullyPopulated()?b.resolve():n(e.id,d).done(function(d){d.length>=l?(c.hasOwnSounds=!0,c.next_href=!1,c.lastFetchTime=Date.now(),c[a.add?"add":"reset"](d,a),b.resolve()):h()}).fail(b.reject):h()}.bind(c)),b}function n(a,b){var c=$.Deferred();return $.whenAll(k.map(o.bind(null,a))).done(function(){var a=e.chain(arguments).flatten().uniq().value(),d=a.filter(function(a){return a.id!==b});c.resolve(d)}),c}function o(a,b){var c,d=$.Deferred();return c=new b(null,{resource_id:a}),c.setLimit(20),c.fetch({add:!!c.length}).always(function(){d.resolve.apply(d,c.models),c.release()}),d}var d,e=a("_"),f=a("models/user"),g=a("models/sound"),h=a("collections/user-sounds"),i=a("collections/related-sounds"),j=a("collections/spotlight-sounds"),k=[j,h],l=2;d=c.exports=i.extend({fetch:function(a){return m.call(this,a)},hasOwnSounds:!1,getInfo:function(){return{type:this.hasOwnSounds?"own-related-sounds":"recommender",version:this.audioSourceVersion}}})}),
define("views/sound/offer-related-sounds.tmpl",["vendor/handlebars-runtime","views/sound/offer-related-play-button"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;return f+='<div class="offerRelatedSounds__button" style="background-image:url(',g=b.nextArtwork,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"nextArtwork",{hash:{}})),f+=n(g)+');"> ',g="views/sound/offer-related-play-button",h=c.$view,g=h.call(b,g,{hash:{}}),f+=n(g)+'\n</div>\n<h1 class="offerRelatedSounds__title">Hear more tracks like this</h1>\n',f})}),
define("views/sound/offer-related-sounds.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".offerRelatedSounds{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:60%;max-width:250px;margin:0 auto;color:#fff;line-height:1.8;display:table}.offerRelatedSounds.state-medium,.offerRelatedSounds.state-small{width:100%}.offerRelatedSounds__title{margin:0;display:table-cell;vertical-align:middle;font-weight:100;font-size:22px}.offerRelatedSounds.state-medium .offerRelatedSounds__title,.offerRelatedSounds.state-small .offerRelatedSounds__title{display:block;font-size:14px;position:absolute;top:100%;width:100%;text-align:center;margin-top:1em}.offerRelatedSounds__button{width:80px;height:80px;line-height:80px;float:left;margin-right:10px;text-align:center}.offerRelatedSounds.state-medium .offerRelatedSounds__button,.offerRelatedSounds.state-small .offerRelatedSounds__button{float:none;margin:0 auto}.offerRelatedSounds__button>.offerPlayButton{display:inline-block;vertical-align:middle;width:46px;height:46px;outline:0;padding:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/related-sounds-title.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return g=b.prefix,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"prefix",{hash:{}})),f+=m(g)+' <a class="sc-link-white" href="',g=b.linkHref,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"linkHref",{hash:{}})),f+=m(g)+'">',g=b.linkText,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"linkText",{hash:{}})),f+=m(g)+"</a>\n",f})}),
define("lib/views/list",["require","exports","module","_","lib/view","vendor/handlebars-runtime"],function(a,b,c){function h(){var a=e.pluck(this.subviews,"model");return this.collection.find(function(b){return a.indexOf(b)===-1})}var d,e=a("_"),f=a("lib/view"),g=a("vendor/handlebars-runtime");d=c.exports=f.extend({emptyTemplate:null,defaults:{bulkFetch:0,maxDisplay:3,inverted:!1},Subview:null,subviewArgs:{},listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",animations:{},template:function(){return""},_listElement:null,fetchData:function(){return this.options.bulkFetch?this.collection.bulkFetch(this.options.bulkFetch):this.collection.fetch()},renderDecorate:function(){this.createListElement()&&this.addInitialItems()},createListElement:function(){var a=this.getListContainer(),b;return a.length&&!this._listElement&&(b=document.createElement(this.listTagName),this.listClassName&&(b.className=this.listClassName),a.append(b),this._listElement=$(b)),this._listElement},addInitialItems:function(){var a,b=this.getModelsToRender(),c=Math.min(this.options.maxDisplay||Infinity,b.length);for(a=0;a<c;++a)this.createAndInsertListItemView(b[a],-1)},_teardown:function(){this._listElement&&(this._listElement.remove(),this._listElement=null),f.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(a,b){var c,d=this.options.maxDisplay;c=this.addListItemSubview(a),c.render(),this.addListItemToDOM(c,e.isNumber(b)?b:-1),d&&this.getListItemViews().length>d&&(c=this.getListItemView(this.collection.at(d)),c&&(this.removeListItemFromDOM(c),this.removeSubview(c)))},getTemplate:function(a){return!this.emptyTemplate||!a||this.collection.length||!this.collection.isFullyPopulated()?f.prototype.getTemplate.apply(this,arguments):this.emptyTemplate},getListContainer:function(){return this.$el},getListElement:function(){return this._listElement||$()},getListItemView:function(a){return e.find(this.subviews,function(b){return b.model===a})},getListItemWrappers:function(){return this.getListElement().children()},getListItemViews:function(){var a=this.Subview;return this.subviews.filter(function(b){return b instanceof a})},getListItemViewByScrollOffset:function(a){var b,c;return e.find(this.subviews,function(d){return d.$el.is(":visible")?(b=d.$el.outerHeight(),c=d.$el.position().top+a-b/2,c<=a&&a<c+b):!1})},getSubviewArgs:function(a){return e.defaults({resource_id:a.resource_id,resource_type:a.resource_type},this.subviewArgs)},getListItemAttributesData:function(a){return a.model?a.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(a){var b=this.getListItemAttributes(a);return new g.SafeString(e.toAttributesString(b))},onAdd:function(a,b,c){if(this.disposed)return;if(!this.getListElement().length&&b.length===1&&a===b.at(0)){this.rerender();return}var d=c&&typeof c.index=="number"?c.index:-1,e=this.options.maxDisplay,f=!e||d>=0&&d<e||d<0&&this.collection.length<=e;f&&this.createAndInsertListItemView(a,d)},onRemove:function(a){var b=this.getListItemView(a);b&&(this.removeListItemFromDOM(b),this.removeSubview(b))},addListItemSubview:function(a){var b=this.getSubviewArgs(a);return this.addSubview(new this.Subview(b))},getListItemViewByEvent:function(a){var b=$(a.target).closest(this.getListItemSelector()),c;return b.length&&(c=e.find(this.subviews,function(a){return a.el===b.children()[0]})),c},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},createSubviewWrapper:function(a){var b=this.getListItemAttributesString(this.getListItemAttributesData(a)),c;return b=b.toString().length?" "+b:"",c=$("<"+this.itemTagName+' class="'+this.itemClassName+'"'+b+">"),c},getSubviewWrapper:function(a){return a.$el.parent()},getSubviewInWrapper:function(a){return e.find(this.subviews,function(b){return b.$el.parent().is(a)})},addListItemToDOM:function(a,b){var c=this.getListElement(),d=this.getSubviewWrapper(a),e=this.options.inverted,f,g;d.length||(d=this.createSubviewWrapper(a),d.append(a.el)),b===-1||b>=this.collection.length-1||b===undefined?c[e?"prepend":"append"](d):b===0?c[e?"append":"prepend"](d):(g=this.getListItemView(this.collection.at(b-1)),g&&(f=this.getSubviewWrapper(g),d[e?"insertBefore":"insertAfter"](f)))},removeListItem:function(a){var b=this.getListItemView(a);b&&this.removeListItemFromDOM(b)},removeListItemFromDOM:function(a){var b,c=this.getSubviewWrapper(a),d=this.options.maxDisplay;b=function(){var b,e,f,g=c.index();c.detach(),a._dispose(),f=!this._disposed&&d&&d<=this.collection.length&&this.getListItemWrappers().length<d,f&&(e=h.call(this),b=this.addListItemSubview(e),b.render(),this.addListItemToDOM(b,g))}.bind(this),this.animations.remove?this.addDeferred(setTimeout(c.fadeOut.bind(c,"slow",b),this.animations.remove.delay)):b()},detachSubviewFromDOM:function(a){this.getSubviewWrapper(a).detach()},appendDOMElement:function(a){var b=this.getListContainer();b&&b[this.options.inverted?"prepend":"append"](a)},getCollectionData:function(){return[]}})}),
define("views/sound/visual-sound-badge",["require","exports","module","models/sound","lib/view","views/sound/visual-sound-badge.tmpl","views/sound/visual-sound-badge.css"],function(a,b,c){var d,e=a("models/sound"),f=a("lib/view");d=c.exports=f.extend({template:a("views/sound/visual-sound-badge.tmpl"),css:a("views/sound/visual-sound-badge.css"),ModelClass:e,className:"visualSoundBadge g-box-full",requiredAttributes:["permalink"]})}),
define("lib/window-events",["require","exports","module","_","lib/backbone"],function(a,b,c){function h(a,b){var c=b+"d",f=a==="resize"?i(c):d.trigger.bind(d,a+":"+c);return e[b](f,g)}function i(a){var b=window.innerWidth,c=window.innerHeight,e=d.trigger.bind(d,"resize:x:"+a),f=d.trigger.bind(d,"resize:y:"+a),g=d.trigger.bind(d,"resize:"+a);return function(a){var d=window.innerWidth,h=window.innerHeight;d!==b&&e(a),h!==c&&f(a),g(a),c=h,b=d}}var d,e=a("_"),f=a("lib/backbone"),g=200;d=c.exports=e.extend({},f.Events),$(window).on("resize",h("resize","debounce")).on("resize",h("resize","throttle")).on("scroll",h("scroll","debounce")).on("scroll",h("scroll","throttle"))}),
define("views/sound/related-visual-sounds.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".relatedVisualSounds{position:relative;overflow:hidden;width:100%;height:100%}.relatedVisualSounds__item{float:left;margin-left:10px}.relatedVisualSounds__item:first-child{margin-left:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("config/sizes",["require","exports","module"],function(a,b,c){c.exports={SMALL:"small",MEDIUM:"medium",DEFAULT:"default"}}),
define("lib/animation",["require","exports","module"],function(a,b,c){function g(a,b){var c=$.Deferred();return a.removeClass("g-opacity-transition").css({opacity:b?0:1}).addClass("g-opacity-transition").css({opacity:b?1:0}),h(f).progress(c.notify).done(function(){a.removeClass("g-opacity-transition"),c.resolve()}),c}function h(a){var b=$.Deferred(),c=Date.now(),d,e,f;return f=setInterval(function(){e=Date.now()-c,d=Math.min(1,e/a),b.notify(d),d===1&&(b.resolve(),clearInterval(f))},16),b.fail(function(){clearInterval(f)}),b}function i(a,b,c,d){return c*a/d+b}function j(a,b,c,d){return c*(a/=d)*a+b}function k(a,b,c,d){return-c*(a/=d)*(a-2)+b}function l(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function m(a,b,c,d){return c*(a/=d)*a*a+b}function n(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}var d,e={linear:i,"ease-in":j,"ease-out":k,"ease-in-out":l,"ease-in-cubic":m,"ease-out-cubic":n},f=200;d=c.exports={fadeOut:function(a,b){return g(a,!1,b)},fadeIn:function(a,b){return g(a,!0,b)},animateValue:function(a,b,c,d){var f=$.Deferred(),g=c-b,i=h(a),j=e[d]||e.linear;return g?(i.progress(function(c){var d=a*c,e=j(d,b,g,a);f.notify(e)}).done(f.resolve),f.fail(i.reject),f):f.resolve()}}}),
define("views/sound/artwork-waveform",["require","exports","module","models/sound","lib/views/mixins/responsive","lib/view","views/sound/artwork-waveform.css","views/sound/artwork-waveform.tmpl"],function(a,b,c){function h(a){this.options.show_artwork=!a,this.toggleState("noArtwork",a),this.rerender()}var d,e=a("models/sound"),f=a("lib/views/mixins/responsive"),g=a("lib/view");d=c.exports=g.extend(f,{css:a("views/sound/artwork-waveform.css"),template:a("views/sound/artwork-waveform.tmpl"),className:"artworkWaveform g-box-full",ModelClass:e,defaults:{show_artwork:!0},states:{"state-small":h}})}),
define("lib/canvas",["require","exports","module","_","lib/browser"],function(a,b,c){function f(a){a=d.defaults(a||{},{width:0,height:0,canvas:document.createElement("canvas")}),this.canvas=a.canvas,this.context=a.canvas.getContext("2d"),this.width=a.width||a.canvas.offsetWidth,this.height=a.height||a.canvas.offsetHeight,this.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,this.backingStoreRatio=e.backingStoreRatio,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,this.canvas.setAttribute("width",this.width*this.canvasPixelRatio),this.canvas.setAttribute("height",this.height*this.canvasPixelRatio),this.devicePixelRatio!==this.backingStoreRatio&&this.context.scale(this.canvasPixelRatio,this.canvasPixelRatio)}function g(a,b){return{x:a.x*b,y:a.y*b}}var d=a("_"),e=a("lib/browser");c.exports=f,d.extend(f.prototype,{drawImage:function(){this.context.drawImage.apply(this.context,arguments)},putImageData:function(a,b){this.context.putImageData(a,g(b,this.canvasPixelRatio))},getImageData:function(a,b){return a=g(a,this.canvasPixelRatio),b=g(b,this.canvasPixelRatio),this.context.getImageData(a.x,a.y,b.x-a.x,b.y-a.y)}})}),
define("lib/views/mixins/multi-resource-type",["require","exports","module","models/sound","models/group","models/user","models/playlist","lib/mixin","config/resources"],function(a,b,c){var d,e=a("models/sound"),f=a("models/group"),g=a("models/user"),h=a("models/playlist"),i=a("lib/mixin"),j=a("config/resources");d=c.exports=new i({defaults:{isAudible:!1,isUser:!1,isGroup:!1,isSound:!1,isPlaylist:!1,isPrivate:function(){return this.isAudible&&this.model.isPrivate()},isShareable:function(){return this.isAudible&&this.model.isShareable()},isLikeable:function(){return this.isAudible&&!this.model.isPrivate()},isBuyable:function(){return!!this.isAudible&&!!this.model.get("purchase_url")},isDownloadable:function(){return!!this.isAudible&&!!this.model.get("download_url")},getShareURL:function(){var a=this.model.get("permalink_url");switch(this.options.resource_type){case j.USER_SOUNDS:a+="/tracks";break;case j.USER_FAVORITES:a+="/likes"}return this.isAudible&&this.isPrivate()&&(a+="/"+this.model.get("secret_token")),a}},before:{setup:function(){if(!this.model){var a=this.options;switch(a.resource_type){case j.USER:case j.USER_SOUNDS:case j.USER_FAVORITES:case j.USER_SPOTLIGHT:this.ModelClass=g,this.isUser=!0;break;case j.SOUND:this.ModelClass=e,this.isAudible=!0,this.isSound=!0;break;case j.PLAYLIST:this.ModelClass=h,this.isAudible=!0,this.isPlaylist=!0;break;case j.GROUP:case j.GROUP_SOUNDS:this.ModelClass=f,this.isGroup=!0}this.model=this.getModel(a.resource_id,a.resource_type)}}}})}),
define("views/sound/waveform",["require","exports","module","config","models/sound","views/sound/scrubber","lib/view","views/sound/waveform-canvas","views/sound/waveform.tmpl","views/sound/waveform.css"],function(a,b,c){function j(a){if(this.disposed)return;this.subviews.waveformCanvas.setSeekPosition(a||null)}function k(a){var b=a?"on":"off";this.model[b]("play",l,this)}function l(){this.model.isPlaying()&&this.toggleState("playing",!0)}var d,e=a("config"),f=a("models/sound"),g=a("views/sound/scrubber"),h=a("lib/view"),i=a("views/sound/waveform-canvas").Events;d=c.exports=h.extend({template:a("views/sound/waveform.tmpl"),css:a("views/sound/waveform.css"),className:"waveform sc-selection-disabled g-opacity-transition",ModelClass:f,defaults:{upperPartHeight:.7,show_comments:!0,visual:!1,alt:!1,inverse:!1},requiredAttributes:{playlist:["tracks"],sound:["id","waveform_url","state"]},setup:function(){this.toggleState("visual",this.options.visual),k.call(this,!0)},dispose:function(){k.call(this,!1)},renderDecorate:function(){this.subviews.waveformCanvas.on(i.RENDERED,function(){this.toggleState("visible",!0),l.call(this)},this),this.subviews.scrubber.on(g.Events.MOUSE_LEAVE,j,this).on(g.Events.MOUSE_MOVE,j,this)},getColor:function(){return this.options.alt?"#333333":"#FFFFFF"},toggleAltColor:function(){this.options.alt=!this.options.alt,this.rerender()},getTemplateData:function(a){var b=e.get("widgetParams"),c=this.options,d=this.model.resource_type==="sound";return{model:a,isProcessing:this.model.isProcessing(),isCommentable:b&&b.show_comments&&a.commentable&&d&&c.show_comments,upperPartHeight:c.upperPartHeight,upperPartHeightPercent:c.upperPartHeight*100+"%",inverseWaveform:!c.alt&&c.visual||c.inverse}}})}),
define("views/sound/visual-audible.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualAudible{width:100%;height:100%;position:relative}.visualAudible.mobile,.visualAudible.mobile *{-webkit-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden}.visualAudible__artwork,.visualAudible__artworkOverlay,.visualAudible__artworkOverlay:after,.visualAudible__artworkOverlayBottom,.visualAudible__artworkOverlayTop,.visualAudible__artworkOverlay{position:absolute;top:0;left:0;width:100%;height:100%}.visualAudible__artworkOverlay:after{display:block;content:'';background:#000;opacity:.6}.visualAudible__artworkOverlayBottom{-webkit-filter:blur(2px)}.visualAudible__artworkOverlayTop{-webkit-filter:blur(8px);opacity:.9}.visualAudible__artworkOverlay{opacity:0}.visualAudible.background .visualAudible__artworkOverlay{opacity:1}.visualAudible__body{position:relative;margin:0 0 90px;padding:14px 11px 14px 10px}.visualAudible__footer{position:absolute;right:0;bottom:0;left:0;height:110px;padding:15px 10px;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.visualAudible.background .visualAudible__footer{-webkit-transform:translate(0,100%);-ms-transform:translate(0,100%);transform:translate(0,100%)}.visualAudible.adBackground .soundHeader__actions{opacity:0}.visualAudible__total{position:absolute;bottom:10px;left:10px;z-index:100}.visualAudible__waveform{position:absolute;height:74px;left:10px;right:10px;bottom:20px;-webkit-transition:opacity .2s ease-out,-webkit-transform .2s ease-out;transition:opacity .2s ease-out,transform .2s ease-out}.visualAudible__waveform>.artworkWaveform{position:absolute;top:0;left:0;opacity:1;z-index:101}.visualAudible__waveform>.artworkWaveform.hidden{opacity:0}.visualAudible__progressBar{position:fixed;bottom:0;left:0;right:0;opacity:0}.visualAudible.minimal .visualAudible__waveform{-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.visualAudible.minimal .soundHeader__playButton,.visualAudible.minimal .soundHeader__title,.visualAudible.minimal .soundHeader__actions,.visualAudible.minimal .visualAudible__waveform{opacity:0}.visualAudible.onlyArtwork .soundHeader__logo,.visualAudible.onlyArtwork .soundHeader__title,.visualAudible.onlyArtwork .soundHeader__actions,.visualAudible.onlyArtwork .soundHeader__playButton,.visualAudible.onlyArtwork .visualAudible__waveform{opacity:0}.visualAudible.onlyArtwork .visualAudible__progressBar,.visualAudible.minimal .visualAudible__progressBar{opacity:1}@media (max-height:350px){.visualAudible .visualAudible__waveform{height:44px}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visual-audible.tmpl",["vendor/handlebars-runtime","views/sound/visuals","lib/views/image","views/sound/header","views/sound/sounds-total","views/sound/seekable-thin-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e="views/sound/visuals",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g="visuals",f.key=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function o(a,b){var d="",e,f,g;return d+=" ",e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.cover=g,g=500,f.size=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+' <div class="visualAudible__artworkOverlay g-transition-opacity"> ',e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.cover=g,g=500,f.size=g,g="visualAudible__artworkOverlayBottom",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.cover=g,g=500,f.size=g,g="visualAudible__artworkOverlayTop",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}function p(a,b){var d="",e,f,g;return d+=' <div class="visualAudible__total g-transition-opacity"> ',e="views/sound/sounds-total",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g="soundsTotal",f.key=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}function q(a,b){var d="",e,f,g;return d+=' <div class="visualAudible__progressBar g-transition-opacity"> ',e="views/sound/seekable-thin-bar",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="visualAudible__artwork"> ',g=b.has_visuals,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.program(3,o,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n</div>\n<div class="visualAudible__body"> <div class="visualAudible__header"> ',g="views/sound/header",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_id,h.resource_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_type,h.resource_type=i,i=!0,h.visual=i,i=!0,h.show_button_overlay=i,i="header",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div>\n</div>\n<div class="visualAudible__footer g-transition-transform"> ',g=b.is_sound,h=c.unless,k=l.program(5,p,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' <div class="visualAudible__waveform g-transition-transform"></div> ',g=b.is_sound,h=c["if"],k=l.program(7,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n</div>\n",f})}),
define("views/ads/ad-container",["require","exports","module","_","lib/ad-manager","lib/views/mixins/has-ad-state","lib/views/mixins/responsive","lib/view","views/ads/ad-container.tmpl","views/ads/ad-container.css"],function(a,b,c){function k(){this.toggleState("visible",!0),this.rerender()}function l(){this.toggleState("visible",!1),this.addDeferred(e.delay(this.teardown,250))}var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/views/mixins/has-ad-state"),h=a("lib/views/mixins/responsive"),i=a("lib/view"),j=470;d=c.exports=i.extend(h,g,{template:a("views/ads/ad-container.tmpl"),css:a("views/ads/ad-container.css"),onWindowSizeChange:function(a,b){this.toggleState("tight",b.height<j)},className:"adContainer g-transition-transform",hasData:function(){return!!f.getCurrentSound()},getTemplateData:function(){var a=f.getCurrentAd();return a?a.toJSON():{}},renderDecorate:function(){f.metrics("audio_ad:impression")},onAdStart:k,onAdFinish:l})}),
define("models/audible",["require","exports","module","config/resources","models/playlist","models/sound"],function(a,b,c){var d,e=a("config/resources"),f=a("models/playlist"),g=a("models/sound");d=c.exports=function(a,b){var c=a.resource_type,d;return delete a.resource_type,c===e.PLAYLIST?d=new f(a,b):d=new g(a,b),d},d.getClass=function(a){var b=a.resource_type;return b===e.PLAYLIST?f:g}}),
define("views/sound/teaser.tmpl",["vendor/handlebars-runtime","lib/views/image"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){return' <div class="teaser__timer sc-font-light sc-truncate">Back to track in <span class="teaser__countdown"></span> &hellip; </div>\n'}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div class="teaser__text"> <h2 class="sc-font-light sc-truncate">Explore more music & audio like</h2> <h2 class="teaser__trackTitle sc-truncate sc-orange sc-font-light">',g=b.title,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"title",{hash:{}})),f+=p(g)+'</h2> <h2 class="sc-font-light sc-truncate">On SoundCloud.</h2>\n</div>\n<a class="teaser__button" href="',g=b.link,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"link",{hash:{}})),f+=p(g)+'"><span class="sc-visuallyhidden">Download the app</span></a>\n<div class="teaser__dismiss"></div>\n',g=b.hasCountDown,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f+='\n<div class="teaser__artwork"> <a href="',g=b.link,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"link",{hash:{}})),f+=p(g)+'">',g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.cover=i,i=500,h.size=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+"</a>\n</div> ",f})}),
define("views/sound/teaser.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".teaser{position:relative;width:100%;height:100%;background:rgba(255,255,255,.9)}.teaser>*{visibility:hidden}.teaser.visible>*{visibility:visible}.teaser__text,.teaser__button,.teaser__artwork,.teaser__timer{position:absolute}.teaser.artworkHidden .teaser__artwork{display:none}.teaser__text>h2{margin:3px 0 0;text-align:center}.teaser__trackTitle{font-size:24px}.teaser.state-small .teaser__text>h2,.teaser.state-medium .teaser__text>h2{font-size:14px}.teaser.state-small .teaser__trackTitle,.teaser.state-medium .teaser__trackTitle{font-size:18px}.teaser__button{display:block;height:57px;overflow:hidden;margin:0 auto}.teaser .teaser__button{background:url(/player/assets/images/hearmore_204_57-b4c10349.png) center no-repeat;background-size:204px 57px;width:204px}.teaser.android .teaser__button{background:url(/player/assets/images/google_165x57-b4c10349.png) center no-repeat;background-size:165px 57px;width:165px}.teaser.ios .teaser__button{background:url(/player/assets/images/apple_193x57-63ff7a5d.png) center no-repeat;background-size:193px 57px;width:193px}.teaser__dismiss{position:absolute;top:15px;right:15px;width:29px;height:29px;cursor:pointer;background:url(/player/assets/images/dismiss_button_29x29-b4c10349.png) center no-repeat;background-size:29px 29px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.teaser__dismiss{background-image:url(/player/assets/images/dismiss_button_58x58-63ff7a5d.png)}.teaser .teaser__button{background-image:url(/player/assets/images/hearmore@2x-b4c10349.png)}.teaser.android .teaser__button{background-image:url(/player/assets/images/google_330x114-b4c10349.png)}.teaser.ios .teaser__button{background-image:url(/player/assets/images/apple_385x114-63ff7a5d.png)}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("collections/user-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d,e=a("collections/sounds");d=c.exports=e.extend({defaults:{resource_type:"users",sounds_type:"tracks"}})}),
define("collections/related-sounds",["require","exports","module","config","collections/sounds"],function(a,b,c){function h(){return Math.floor(Math.random()*1e8)}var d,e=a("config"),f=a("collections/sounds"),g=null;d=c.exports=f.extend({defaults:{sounds_type:"related",resource_type:"tracks"},audioSourceVersion:null,baseUrlQueryParams:function(){var a=e.get("me").id||null;return!a&&!g&&(g=h()),{user_id:a,anon_user_id:a?null:g}},getInfo:function(){return{type:"recommender",version:this.audioSourceVersion}},parse:function(a){return this.audioSourceVersion=a.version||"no_version",f.prototype.parse.apply(this,arguments)}})}),
define("collections/spotlight-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d,e=a("collections/sounds");d=c.exports=e.extend({isEdgeBaseUrl:!0,defaults:{sounds_type:"spotlight",resource_type:"users"}})}),
define("views/sound/offer-related-play-button",["require","exports","module","lib/view","views/sound/offer-related-play-button.tmpl"],function(a,b,c){var d,e=a("lib/view");d=c.exports=e.extend({template:a("views/sound/offer-related-play-button.tmpl"),tagName:"button",className:"offerPlayButton sc-button-nostyle"})}),
define("views/sound/visual-sound-badge.tmpl",["vendor/handlebars-runtime","lib/views/image","views/sound/title"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.cover=i,i=200,h.size=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n<div class="visualSoundBadge__title"> ',g="views/sound/title",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.visual=i,i=!1,h.show_link=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/visual-sound-badge.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualSoundBadge{position:relative;overflow:hidden}.visualSoundBadge__title{position:absolute;top:5px;left:5px;right:5px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork-waveform.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".artworkWaveform{position:relative}.artworkWaveform__artwork{position:absolute;top:-3px;left:0;width:80px;height:80px}.artworkWaveform__waveform{position:absolute;top:0;left:90px;right:0;bottom:0;height:100%}.artworkWaveform.noArtwork .artworkWaveform__waveform{left:0}@media (max-height:350px){.artworkWaveform__waveform{left:60px}.artworkWaveform .artworkWaveform__artwork{width:50px;height:50px}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork-waveform.tmpl",["vendor/handlebars-runtime","views/sound/artwork","views/sound/waveform"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=' <div class="artworkWaveform__artwork"> ',e="views/sound/artwork",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=80,f.size=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;g=b._options,g=g===null||g===undefined||g===!1?g:g.show_artwork,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+='\n<div class="artworkWaveform__waveform"> ',g="views/sound/waveform",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="waveform",h.key=i,i=!0,h.visual=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("models/group",["require","exports","module","lib/mixins/has-image","lib/mixins/throws-not-found","lib/model"],function(a,b,c){var d,e=a("lib/mixins/has-image"),f=a("lib/mixins/throws-not-found"),g=a("lib/model");d=c.exports=g.extend(e,f,{resource_type:"group",urnPrefix:"soundcloud:groups",baseUrl:function(){return["groups",this.id].join("/")}})}),
define("views/sound/scrubber",["require","exports","module","lib/event-bus","lib/views/mixins/has-hover-intent","lib/views/mixins/seekable","tracking-events","lib/view","views/sound/scrubber.tmpl","views/sound/scrubber.css"],function(a,b,c){function j(){e.trigger(h.UI.WAVEFORM_CLICKED,this.model)}var d,e=a("lib/event-bus"),f=a("lib/views/mixins/has-hover-intent"),g=a("lib/views/mixins/seekable"),h=a("tracking-events"),i=a("lib/view");d=c.exports=i.extend(g,f,{template:a("views/sound/scrubber.tmpl"),css:a("views/sound/scrubber.css"),className:"scrubber",events:{click:j},onMouseEnter:function(){this.model.initAudio(),this.trigger(d.Events.MOUSE_ENTER)},onMouseLeave:function(){this.trigger(d.Events.MOUSE_LEAVE)}})}),
define("views/sound/waveform-canvas",["require","exports","module","_","models/audible","lib/views/canvas-view","lib/circuit-breaker","vendor/color/color","config","lib/store","lib/support"],function(a,b,c){function w(a){var b=a.waveform,c=a.scaledWidth,d=a.scaledHeight,e=a.upperPartHeight,f=a.context,g=a.offset,h=Math.round(e*d),j=Math.round(d-h),k=c/r,l=i(a.bgColor),m,n,o,p,q,t,u,v,w,x,y,z,A=null,B=null,C=2,D=1,E=C+D;m=l.rgba(a.upperAlpha),o=l.rgba(a.lowerAlpha),n=f.createLinearGradient(0,0,0,d),n.addColorStop(0,l.lighten(20).rgba(0)),n.addColorStop(.6,l.lighten(12).rgba(.6*a.gapAlpha)),n.addColorStop(1,l.rgba(1*a.gapAlpha)),p=l.rgba(.25*a.gapAlpha);for(q=0;q<c;++q)z=E-q%E<=D,u=g+q,t=z?q+1:q,v=Math.ceil((t-t%E)/k),w=b[v]/s,x=Math.round(w*h),y=Math.round((1-w)*j+h),f.fillStyle=z?n:m,z&&(x=Math.max(x,A),y=Math.min(y,B)),f.fillRect(u,x,1,h-x),f.fillStyle=z?p:o,f.fillRect(u,h,1,y-h),A=x,B=y}function x(a){return $.ajax({url:j.get("wisHost")+"/"+a,type:"GET",dataType:"json"})}function y(){var a=this.model.getSounds(),b,c=this.elWidth,d=this.model.duration(),f;return a.length?f=a.map(function(a){return{duration:a.duration(),waveform_url:a.get("waveform_url")}}):f=[{duration:d,waveform_url:n}],b=f.map(function(a){var b=Math.round(c*a.duration/d),e=b>q?a.waveform_url:u[Math.floor(Math.random()*u.length)],f=$.Deferred(),g,h;return e.indexOf(o)>-1&&(e=n),h=e.split("/").pop(),g=t.get(h),g?f.resolve({data:g}):(f.done(function(a){t.set(a.key,a.data)}),v.enabled&&x(h).done(function(a){v.succeeded();var b=new m(a.samples.length);a.samples.forEach(function(c,d){b[d]=a.height-c}),f.resolve({key:h,data:b})}).fail(function(){v.failed()})),f}),$.when.apply($,b).then(function(){this.waveformData=e.pluck(arguments,"data")}.bind(this))}var d,e=a("_"),f=a("models/audible"),g=a("lib/views/canvas-view"),h=a("lib/circuit-breaker"),i=a("vendor/color/color"),j=a("config"),k=a("lib/store"),l=a("lib/support"),m=l.typedArrays?Uint8Array:Array,n="//web.archive.org/web/20141112015650/https://w1.sndcdn.com/90GaSwazbrh1_m.png",o="/images/player-waveform-medium.png",p=500,q=15,r=1800,s=140,t=new k({maxLength:p}),u=["//web.archive.org/web/20141112015650/https://w1.sndcdn.com/oQ4mQ28umFy9_m.png","//web.archive.org/web/20141112015650/https://w1.sndcdn.com/yAsGo4Oj2vjn_m.png","//web.archive.org/web/20141112015650/https://w1.sndcdn.com/XOsjuw7QwaPt_m.png","//web.archive.org/web/20141112015650/https://w1.sndcdn.com/H9uGzKOYK5Ph_m.png","//web.archive.org/web/20141112015650/https://w1.sndcdn.com/IHBAsSu3O7qn_m.png","//web.archive.org/web/20141112015650/https://w1.sndcdn.com/wco8JS0UScQo_m.png"],v;d=c.exports=g.extend({className:"g-box-full waveformCanvas",defaults:{upperPartHeight:.5,bgColor:"#333333"},ModelClass:f,requiredAttributes:{sound:["waveform_url"]},waveformData:null,setup:function(){v||(v=new h({tolerance:5,baseDelay:2e3,maxDelay:12e4}))},onCanvasInserted:function(){this.renderWaveform()},onCanvasResize:function(){this.renderWaveform()},renderWaveform:function(){if(this.disposed)return;if(!this.waveformData)y.call(this).done(this.renderWaveform.bind(this));else{var a=this.options,b=this.context,c=this.elHeight,e=0;this.clearCanvas(),this.waveformData.forEach(function(d){var f=this.elWidth;w({waveform:d,scaledWidth:f,scaledHeight:c,context:b,offset:e,bgColor:a.bgColor,upperPartHeight:a.upperPartHeight,upperAlpha:a.upperAlpha,lowerAlpha:a.lowerAlpha,gapAlpha:a.gapAlpha}),e+=f},this),this.trigger(d.Events.RENDERED)}},renderWaveformDecorate:$.noop},{Events:{RENDERED:"waveform-canvas.rendered"}})}),
define("views/sound/waveform.tmpl",["vendor/handlebars-runtime","views/sound/overlay-waveform-canvas","views/sound/waveform-comments","views/sound/time-indicator","views/sound/scrubber"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f,g;d+=' <div class="waveform__layer waveform__waveformCanvas g-opacity-transition"> ',e="views/sound/overlay-waveform-canvas",f={},g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_id,f.resource_id=g,g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_type,f.resource_type=g,g=a.inverseWaveform,f.inverse=g,g="waveformCanvas",f.key=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=l(e)+" </div> ",e=a.isCommentable,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=' <div class="waveform__layer" style="height:',e=a.upperPartHeightPercent,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"upperPartHeightPercent",{hash:{}})),d+=l(e)+';"> ',e="views/sound/time-indicator",f={},g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_id,f.resource_id=g,g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_type,f.resource_type=g,g="timeIndicator",f.key=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=l(e)+' </div> <div class="waveform__layer waveform__scrubber" style="height:',e=a.upperPartHeightPercent,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"upperPartHeightPercent",{hash:{}})),d+=l(e)+';"> ',e="views/sound/scrubber",f={},g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_id,f.resource_id=g,g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_type,f.resource_type=g,g="scrubber",f.key=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=l(e)+" </div>\n",d}function q(a,b){var d="",e,f,g;return d+=' <div class="waveform__layer"> ',e="views/sound/waveform-comments",f={},g=a.upperPartHeight,f.defaultHeight=g,g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_id,f.sound_id=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=l(e)+" </div> ",d}function r(a,b){var d="",e,f,g;d+=' <div class="waveform__layer"> ',e="views/sound/overlay-waveform-canvas",f={},g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_id,f.resource_id=g,g=a.model,g=g===null||g===undefined||g===!1?g:g._resource_type,f.resource_type=g,g="waveformCanvas",f.key=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=l(e)+' </div> <div style="height:',e=a.upperPartHeightPercent,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"upperPartHeightPercent",{hash:{}})),d+=l(e)+';" class="waveform__emptyWaveform sc-font sc-type-light"> <span class="waveform__emptyMessage"> ',e=a.isProcessing,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" </span> </div>\n",d}function s(a,b){return"This track is being processed"}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression,m="function",n=c.helperMissing,o=void 0;g=b.isProcessing,h=c.unless,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(4,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/waveform.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveform{position:relative;width:100%;height:100%;z-index:1;opacity:0}.waveform.visible{opacity:1}.waveform.visual.visible .waveform__waveformCanvas{opacity:.4}.waveform:hover .waveform__waveformCanvas,.waveform.hover .waveform__waveformCanvas,.waveform.playing .waveform__waveformCanvas,.waveform.visual.playing .waveform__waveformCanvas,.waveform.visual.hover .waveform__waveformCanvas{opacity:1}.waveform__layer{position:absolute;top:0;left:0;width:100%;height:100%}.waveform__commentsScrubber{padding-bottom:25px}.waveform__scrubber{cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}.waveform__emptyWaveform{position:relative}.waveform__emptyMessage{position:absolute;text-align:center;width:100%;bottom:5px;color:#000;font-size:11px;text-shadow:1px 1px 1px #fff}.single .waveform__emptyMessage{font-size:16px}.waveform__playHint{position:absolute;text-align:center;width:100%;bottom:5px;font-size:11px;text-shadow:none;opacity:0}.single .waveform__playHint{font-size:16px;opacity:1;-webkit-animation:g-fadein 500ms linear;animation:g-fadein 500ms linear}.sound:hover .waveform__playHint{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visuals",["require","exports","module","_","lib/math","lib/views/mixins/multi-resource-type","lib/view","views/sound/visuals.css","views/sound/visuals.tmpl"],function(a,b,c){function i(a){this.model[a]("seeked",j,this)[a]("time",j,this)}function j(){if(this.disposed)return;var a=this.model.currentTime(),b=e.values(this.model.get("visuals")),c=f.clamp(e.sortedIndex(b,{entry_time:a},"entry_time")-1,0,b.length-1),d=b[c];if(c===this.__index)return;this.__index=c,this.$$("backgroundLayer").css("background-image","url("+d.visual_url+")"),this.$$("item").removeClass("visible").filter('[data-timestamp="'+d.entry_time+'"]').addClass("visible")}var d,e=a("_"),f=a("lib/math"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/view");d=c.exports=h.extend(g,{className:"visuals",css:a("views/sound/visuals.css"),template:a("views/sound/visuals.tmpl"),requiredAttributes:["visuals"],__index:null,setup:function(){i.call(this,"on")},dispose:function(){i.call(this,"off")},getTemplateData:function(a){return a.visuals=e.map(a.visuals,function(a){return{id:a.id,background_url:a.visual_url.replace(/[()]/g,window.escape),timestamp:a.entry_time}}),a},renderDecorate:function(){j.call(this)}})}),
define("lib/views/image",["require","exports","module","lib/helpers/image-helper","lib/views/mixins/multi-resource-type","lib/view","lib/views/image.tmpl","lib/views/image.css"],function(a,b,c){function h(){var a=this.model,b=this.options,c={};return c.url=e.urlFrom(a.attributes,b.size),c.altText=b.alt||e.getAltText(a.attributes),c.placeholderUrl=e.getPlaceholderUrl(c.url,b.size),c.width=b.stretch||b.cover?"100%":parseInt(b.size,10)+(b.cover?"px":""),c.height=c.width,c}function i(a){var b=this.$$("placeholder");this.toggleState("fadeIn",!1),setTimeout(b.remove.bind(b),500),e.flagCachedImage(a)}var d,e=a("lib/helpers/image-helper"),f=a("lib/views/mixins/multi-resource-type"),g=a("lib/view");d=c.exports=g.extend(f,{template:a("lib/views/image.tmpl"),css:a("lib/views/image.css"),className:"image",defaults:{alt:"",size:50,stretch:!1,cover:!1},states:{fadeIn:"fadeIn"},requiredAttributes:null,setup:function(){!!this.model.imageAttribute,this.requiredAttributes=["kind",this.model.imageAttribute],this.$el.addClass(["image-"+(this.options.stretch||this.options.cover?"full":this.options.size),"image-"+this.model.resource_type].join(" "))},renderDecorate:function(){var a=h.call(this),b=a.placeholderUrl!==!1;this.toggleState("fadeIn",b),this.addDeferred(e.load(a.url).done(i.bind(this,a.url)))},getModelData:function(){return{}},getTemplateData:function(){var a=h.call(this);return a.backgroundImage=this.options.cover,a}})}),
define("views/sound/header",["require","exports","module","_","lib/animation","config","lib/views/mixins/has-ad-state","lib/views/mixins/multi-resource-type","lib/play-manager","lib/views/mixins/responsive","views/ads/skip","lib/view","views/sound/header.css","views/sound/header.tmpl"],function(a,b,c){function o(a){var b=a?"on":"off",c=this.isPlaylist?j:this.model;c[b]("play",p,this)}function p(){var a=this.subviews.likeButton,b=this.getState("likeVisible");a&&!b&&(this.model.isPlaying()?(this.$$("buttons").prepend(a.$el),this.toggleState("likeVisible")):a.$el.detach())}var d,e=a("_"),f=a("lib/animation"),g=a("config"),h=a("lib/views/mixins/has-ad-state"),i=a("lib/views/mixins/multi-resource-type"),j=a("lib/play-manager"),k=a("lib/views/mixins/responsive"),l=a("views/ads/skip"),m=a("lib/view"),n=g.get("widgetParams");d=c.exports=m.extend(k,i,h,{css:a("views/sound/header.css"),className:"soundHeader sc-media",template:a("views/sound/header.tmpl"),requiredAttributes:{sound:["sharing"],playlist:["sharing"]},defaults:{show_like_button:!0,show_share_button:!0,show_buy_button:!0,show_download_button:!0,show_button_overlay:!1,visual:!1},setup:function(){this.toggleState("visual",this.options.visual),o.call(this,!0)},dispose:function(){o.call(this,!1)},renderDecorate:function(){p.call(this)},getTemplateData:function(){var a=this.options;return a=e.defaults({show_share_button:a.show_share_button&&n.sharing&&this.isShareable(),show_like_button:a.show_like_button&&$.support.cors&&n.liking&&this.isLikeable(),show_buy_button:a.show_buy_button&&n.buying&&this.isBuyable(),show_download_button:a.show_download_button&&n.download&&this.isDownloadable()},a),a},onAdStart:function(a){var b=this.$$("skipAdContainer"),c=this.subviews.skipButton;c||(c=this.addSubview(new l({resource_id:a.id,resource_type:"sound",visual:this.options.visual,iconColor:this.options.visual?"#FFFFFF":"#000000"}),"skipButton")),c.render(),b.append(c.el),f.fadeIn(b)},onAdFinish:function(){var a=this.subviews.skipButton;a.$el.detach(),this.removeSubview("skipButton"),a.teardown()}})}),
define("views/sound/sounds-total",["require","exports","module","config","config/resources","lib/views/mixins/multi-resource-type","lib/view","views/sound/sounds-total.css","views/sound/sounds-total.tmpl"],function(a,b,c){function i(a){var b=null;switch(a){case f.USER_SOUNDS:b=e.get("widgetParams").show_reposts?null:"track_count";break;case f.GROUP_SOUNDS:case f.PLAYLIST:b="track_count";break;case f.USER_FAVORITES:b="public_favorites_count"}return b}var d,e=a("config"),f=a("config/resources"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/view");d=c.exports=h.extend(g,{css:a("views/sound/sounds-total.css"),template:a("views/sound/sounds-total.tmpl"),className:"soundsTotal sc-font sc-pointer",trackCountProperty:null,setup:function(a){this.trackCountProperty=i(a.resource_type),this.trackCountProperty&&(this.requiredAttributes=[this.trackCountProperty])},renderDecorate:function(){this.toggleState("hidden",!(this.trackCountProperty&&this.model.get(this.trackCountProperty)>0))},getTemplateData:function(){return{track_count:this.model.get(this.trackCountProperty)}}})}),
define("views/sound/seekable-thin-bar",["require","exports","module","views/sound/thin-progress-bar","lib/views/mixins/seekable"],function(a,b,c){var d,e=a("views/sound/thin-progress-bar"),f=a("lib/views/mixins/seekable");d=c.exports=e.extend(f)}),
define("views/ads/ad-container.tmpl",["vendor/handlebars-runtime","views/ads/ad","views/sound/thin-progress-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="adContainer__banner"> <b class="adContainer__title">Advertisement</b> ',g="views/ads/ad",h={},i=b.companion_display,h.companion_display=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' <a href="https://web.archive.org/web/20141112015650/http://help.soundcloud.com/customer/portal/articles/1656210" class="adContainer__why right">Why Ads?</a>\n</div>\n',g="views/sound/thin-progress-bar",h={},i=b.sound,i=i===null||i===undefined||i===!1?i:i.id,h.resource_id=i,i="sound",h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n",f})}),
define("views/ads/ad-container.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".adContainer__banner{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transition:margin .25s;transition:margin .25s;height:250px;width:300px}.adContainer.tight .adContainer__banner{margin-top:25px}.adContainer__title,a.adContainer__why{color:#fff;font-size:12px;margin:0 0 2px}.adContainer .thinProgressbar{position:fixed;bottom:0;left:0;right:0}.adContainer .thinProgressbar>.thinProgressbar__played{-webkit-transition:width 1s;transition:width 1s}.adContainer__skip{position:absolute;top:34px;right:11px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/offer-related-play-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<svg xmlns="http://www.w3.org/2000/svg"> <circle fill-opacity="0.2" fill="#000" stroke="#fff" stroke-width="1.5" cx="23" cy="23" r="22"/> <path class="playButton__play" fill="#fff" d="M18,33.6 L21.3,22.9 L18,12.1 L32.6,22.9 L18,33.59 z"/>\n</svg>\n'})}),
define("views/sound/title",["require","exports","module","_","config","config/resources","lib/event-bus","lib/views/mixins/multi-resource-type","tracking-events","lib/view","views/sound/title.tmpl","views/sound/title.css"],function(a,b,c){function l(){h.trigger(j.UI.TITLE_LINK_CLICKED,this.model)}function m(){h.trigger(j.UI.CREATOR_LINK_CLICKED,this.model),this.isAudible&&h.trigger("sound:deeplink",this.$$("h2")[0],this.model)}function n(){var a,b,c,d,e=this.options.resource_type,f=this.model;switch(e){case g.SOUND:case g.PLAYLIST:a=f.get("user").username,c=f.get("user").permalink_url,b=f.get("title"),d=this.getShareURL();break;case g.USER_SOUNDS:case g.USER_FAVORITES:case g.USER_SPOTLIGHT:a=f.get("username"),c=f.get("permalink_url"),b=(e===g.USER_FAVORITES?"Favorite":e===g.USER_SPOTLIGHT?"Featured":"Latest")+" tracks",d=this.getShareURL();break;case g.GROUP_SOUNDS:a=f.get("name"),c=f.get("permalink_url"),b=f.get("short_description")}return{h1Text:a,h1Link:c,h2Text:b,h2Link:d}}var d,e=a("_"),f=a("config"),g=a("config/resources"),h=a("lib/event-bus"),i=a("lib/views/mixins/multi-resource-type"),j=a("tracking-events"),k=a("lib/view");d=c.exports=k.extend(i,{template:a("views/sound/title.tmpl"),css:a("views/sound/title.css"),className:"title sc-truncate",defaults:{visual:!1,show_link:!0,inline:!1,inverse:!1},events:{"click a.title__h1":l,"click a.title__h2":m},requiredAttributes:{user:["permalink_url","username"],track:["permalink_url","title","user"],playlist:["permalink_url","title","user"],group:["name","short_description"]},getTemplateData:function(){var a=n.call(this),b=f.get("widgetParams"),c=this.isSound?b.show_user:!0;return e.extend(a,{visual:this.options.visual,inline:this.options.inline,showH1:c,inverse:this.options.inverse,showH1Link:this.options.show_link,showH2Link:this.options.show_link&&!this.isPrivate()&&a.h2Link,inlineTitle:(c?a.h1Text+" &ndash; ":"")+a.h2Text})}})}),
define("views/sound/artwork",["require","exports","module","_","models/audible","lib/event-bus","tracking-events","lib/view","views/sound/artwork.tmpl","views/sound/artwork.css"],function(a,b,c){function j(){var a=this.model;g.trigger(h.UI.ARTWORK_CLICKED,a),g.trigger("sound:deeplink",this.$$("link")[0],a)}var d,e=a("_"),f=a("models/audible"),g=a("lib/event-bus"),h=a("tracking-events"),i=a("lib/view");d=c.exports=i.extend({template:a("views/sound/artwork.tmpl"),css:a("views/sound/artwork.css"),ModelClass:f,className:"artwork",events:{"click .artwork__link":j},defaults:{show_follow_button:!1,size:200,is_link:!0},getTemplateData:function(a){return e.extend(a,{isLink:this.options.is_link&&!this.model.isPrivate()})}})}),
define("lib/views/mixins/has-hover-intent",["require","exports","module","lib/mixin"],function(a,b,c){function i(a){this._isEntered&&this.onMouseMove(a)}function j(){if(this._isEntered)return;this._hoverTimer=setTimeout(function(){this._isEntered=!0,this.onMouseEnter()}.bind(this),f)}function k(){clearTimeout(this._hoverTimer),this._isEntered=!1,this.onMouseLeave()}var d,e=a("lib/mixin"),f=50,g="hoverintent",h=$.noop;d=c.exports=new e({applyTo:function(a){a.events=a.events||{},a.events["mousemove."+g]=i,a.events["mouseenter."+g]=j,a.events["mouseleave."+g]=k},defaults:{onMouseMove:h,onMouseEnter:h,onMouseLeave:h,hasHoverIntent:!0}})}),
define("lib/views/mixins/seekable",["require","exports","module","_","models/audible","lib/play-manager","config","lib/support","lib/mixin"],function(a,b,c){function s(a){this.model.seek(t.call(this,a)),this.onSeek()}function t(a){var b;return b=(a-x.call(this).left)/w.call(this),Math.floor(b*this.model.duration())}function u(a){var b=a.originalEvent.pageX,c=a.originalEvent.pageY,d=x.call(this);return b>=d.left&&b<=d.right&&c>=d.top&&c<=d.bottom}function v(a){var b=a?"on":"off";$(window)[b]("resize",this.onWindowResize),this.model[b]("play",this.onPlay,this)[b]("pause",this.onPause,this)}function w(){return this.width=this.width||this.$el.width(),this.width}function x(){var a=this.$el.offset();return a.right=a.left+this.$el.width(),a.bottom=a.top+this.$el.height(),a}function y(){return this.model.loadProgress()*w.call(this)}var d,e=a("_"),f=a("models/audible"),g=a("lib/play-manager"),h=a("config"),i=a("lib/support"),j=a("lib/mixin"),k=h.get("appView").$el,l=$(document),m=500,n=50,o={CLICK:"click:scrubber",MOUSE_MOVE:"mousemove:scrubber",MOUSE_ENTER:"mouseenter:scrubber",MOUSE_LEAVE:"mouseleave:scrubber"},p=i.touch?"touchend":"mouseup",q=i.touch?"touchstart":"mousedown",r=i.touch?"touchmove":"mousemove";d=c.exports=new j({applyTo:function(a){var b=a.constructor;e.extend(b,{Events:o}),a.events=a.events||{},a.events[q]="onPointerDown",a.events[r]="onPointerMove",a.states=e.extend({},a.states,{"selection-disabled":function(a){a?(document.onselectstart=function(){return!1},k.addClass("sc-selection-disabled")):(document.onselectstart=null,k.removeClass("sc-selection-disabled"))}})},before:{setup:function(){this.scrubbingEnabled=!0,this.scrub=e.throttle(this.scrub.bind(this),n),this.unscrub=this.unscrub.bind(this),this.onWindowResize=e.debounce(this.onWindowResize.bind(this),100),v.call(this,!0)},dispose:function(){v.call(this,!1)},renderDecorate:function(){this.width=this.coord=null}},defaults:{ModelClass:f,width:null,coord:null,onWindowResize:function(){this.rerender()},onPlay:function(){this.scrubbingEnabled=!1,e.delay(function(){this.scrubbingEnabled=!0}.bind(this),m)},onPause:function(){this.scrubbingEnabled=!1},onSeek:$.noop,onPointerDown:function(a){this.trigger(o.CLICK),this.scrubbingEnabled&&this.model.isPlaying()?(s.call(this,a.originalEvent.pageX),l.on(r,this.scrub).on(p,this.unscrub)):g.toggle(this.model,{userAction:!0})},onPointerMove:function(a){var b=this.model.isPlaying(),c=a.originalEvent.pageX-x.call(this).left;if(!this.scrubbingEnabled||!b||c>y.call(this)||c<=0)return;(!this.hasHoverIntent||this._isEntered)&&this.trigger(o.MOUSE_MOVE,c-1)},scrub:function(a){if(!u.call(this,a))return l.trigger(p);this.toggleState("selection-disabled",!0),s.call(this,a.originalEvent.pageX)},unscrub:function(){this.toggleState("selection-disabled",!1),l.off(r,this.scrub).off(p,this.unscrub),i.touch&&this.trigger(o.MOUSE_LEAVE)}}})}),
define("views/sound/scrubber.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="scrubber__positionIndicator"></div>\n'})}),
define("views/sound/scrubber.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".scrubber{position:relative;width:100%;height:100%;overflow:hidden;background:rgba(0,0,0,0)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/canvas-view",["require","exports","module","lib/browser","lib/view","lib/window-events"],function(a,b,c){function h(){try{var a=this.$el.width(),b=this.$el.height();if(this.elWidth!==a||this.elHeight!==b)i.call(this,a,b),this.onCanvasResize()}catch(c){}}function i(a,b){var c;this.offset=this.$el.offset(),this.elWidth=a||this.el.offsetWidth,this.elHeight=b||this.el.offsetHeight,this.el.setAttribute("width",this.elWidth),this.el.setAttribute("height",this.elHeight),e.isHiDPI&&(c=window.devicePixelRatio/e.backingStoreRatio,c!==1&&(this.el.setAttribute("width",this.elWidth*c),this.el.setAttribute("height",this.elHeight*c),this.context.scale(c,c)))}var d,e=a("lib/browser"),f=a("lib/view"),g=a("lib/window-events");d=c.exports=f.extend({tagName:"canvas",className:"g-box-full",context:null,template:function(){return""},_setup:function(){this.context=this.el.getContext("2d"),g.on("resize:debounced",h,this),f.prototype._setup.apply(this,arguments)},_dispose:function(){if(this.disposed)return;g.off("resize:debounced",h,this),delete this.context,delete this.elWidth,delete this.elHeight,f.prototype._dispose.apply(this,arguments)},renderDecorate:function(){this.whenInserted().done(function(){i.call(this),this.onCanvasInserted()}.bind(this))},onCanvasInserted:$.noop,onCanvasResize:$.noop,forceResize:function(){this._onWindowResize()},clearCanvas:function(){this.context&&this.context.clearRect(0,0,this.elWidth,this.elHeight)}})}),
define("views/sound/overlay-waveform-canvas",["require","exports","module","_","lib/browser","lib/animation","lib/math","models/audible","views/sound/waveform-canvas","config/waveform-style"],function(a,b,c){function m(){if(this.disposed)return;var a=x.call(this),b=y.call(this);if(b!==this.loadedX||a!==this.playedX)n.call(this),this.loadedX=b,this.playedX=a}function n(){this.disposed||this.whenInserted().done(o.bind(this))}function o(){window.requestAnimationFrame(function(){if(this.disposed)return;p.call(this),z.call(this).forEach(function(a){q.call(this,a)},this),this.toggleState("drawn",!0)}.bind(this))}function p(){if(this.isBackgroundDrawn)return;var a=this.context;a.globalCompositeOperation="source-atop",v.call(this,"background"),a.fillRect(0,0,this.elWidth,this.elHeight),this.isBackgroundDrawn=!0}function q(a){if(this.disposed)return;var b=this.context,c=a.gradient,d;a.animateAlpha&&(!this.alphaTimers[c]&&(c!=="seek"||!this.alphaTimers.hideSeek)&&(this.alphaTimers[c]=r.call(this,c,a.startAlpha,a.endAlpha)),d=t.call(this,c)||a.startAlpha),b.save(),b.globalAlpha=e.isUndefined(d)?1:d,v.call(this,c),b.fillRect(a.x,a.y,a.w,a.h)}function r(a,b,c,d){var e=t.call(this,a)||0,f=l,i;return h.isInRange(e,[b,c])&&(i=Math.abs(c-b),b=e,f=l*(Math.abs(c-b)/i)),s.call(this,a,b),g.animateValue(f,b,c,d||"ease-out-cubic").progress(function(b){s.call(this,a,h.precise(b,5)),o.call(this)}.bind(this))}function s(a,b){this.alphaValues[a]=Math.min(1,Math.max(0,b))}function t(a){return this.alphaValues[a]}function u(a){return k[a?"inverse":"default"]}function v(a){var b=this.context,c=this.options,d=u(this.options.inverse)[a],f,g;this.gradients=this.gradients||{};if(b.fillStyle===this.gradients[a])return;this.gradients[a]||(e.isString(d)?g=d:(g=b.createLinearGradient(0,0,0,this.elHeight),f=w(d,c),f.forEach(function(a){g.addColorStop(a.stop,a.color)})),this.gradients[a]=g),b.fillStyle=this.gradients[a]}function w(a,b){var c=[];return typeof a.top=="string"?c.push({stop:0,color:a.top},{stop:b.upperPartHeight,color:a.top}):a.top.forEach(function(a){c.push({stop:a[0]*b.upperPartHeight,color:a[1]})}),typeof a.bottom=="string"?c.push({stop:b.upperPartHeight+.01,color:a.bottom},{stop:1,color:a.bottom}):a.bottom.forEach(function(a){c.push({stop:a[0]*(1-b.upperPartHeight)+b.upperPartHeight,color:a[1]})}),c}function x(){var a=this.model;return Math.floor(a.currentTime()/a.get("duration")*this.elWidth)}function y(){return Math.floor(this.model.loadProgress()*this.elWidth)}function z(){var a=[],b=this.elHeight,c=this.options,d=Math.round(b*c.upperPartHeight),e=!f.isMobile,g=Math.floor(this.seekX),i=y.call(this),j=x.call(this),k=g>j,l;return a.push({gradient:"loaded",x:0,y:0,w:i,h:b}),a.push({gradient:"progress",x:0,y:0,w:e?g>0?Math.min(g,j):j:j,h:b}),e&&g<j&&a.push({gradient:"progress",x:0,y:d,w:j,h:b-d}),g>0&&!f.isMobile&&(l=h.sort([g,j]),a.push({gradient:"seek",x:l[0],y:0,w:l[1]-l[0],h:d,animateAlpha:!0,startAlpha:k?0:1,endAlpha:.5})),a}var d,e=a("_"),f=a("lib/browser"),g=a("lib/animation"),h=a("lib/math"),i=a("models/audible"),j=a("views/sound/waveform-canvas"),k=a("config/waveform-style"),l=250;d=c.exports=j.extend({className:"waveformCanvas g-box-full sc-pointer",ModelClass:i,seekX:0,isBackgroundDrawn:!1,defaults:{upperAlpha:1,lowerAlpha:.5,gapAlpha:1,upperPartHeight:.7,inverse:!1},setup:function(){this.alphaValues={},this.alphaTimers={},this.model.on("time finish",m,this),this.on(j.Events.RENDERED,n,this),this.options.inverse&&(this.options.gapAlpha=.5),j.prototype.setup.apply(this,arguments)},dispose:function(){this.model.off("time finish",m,this)},onCanvasResize:function(){this.isBackgroundDrawn=!1,this.gradients={},this.renderWaveform(),o.call(this)},setSeekPosition:function(a){if(this.disposed)return;if(!a){var b=this.seekX>x.call(this),c=b?0:1;this.alphaTimers.seek&&(this.alphaTimers.seek.reject(),this.alphaTimers.seek=null),this.alphaTimers.hideSeek=r.call(this,"seek",.5,c,"ease-in-cubic").done(function(){this.seekX=a,this.alphaTimers.hideSeek=null}.bind(this))}else this.alphaTimers.hideSeek&&(this.alphaTimers.hideSeek.reject(),this.alphaTimers.hideSeek=null),this.seekX=a,o.call(this)}})}),
define("views/sound/waveform-comments",["require","exports","module","lib/view","lib/timed-comments-state-machine","lib/views/mixins/has-hover-intent","lib/views/mixins/timed-comments","views/sound/comment-avatars-canvas","views/sound/waveform-comments.css","views/sound/waveform-comments.tmpl"],function(a,b,c){function l(a){var b,c,d,e=n.call(this).width;return e&&(d=Math.floor(k/2/e*this.sound.duration()),c=m.call(this,a),b=this.collection.commentHeadAt(c,d)),b?b.id:null}function m(a){var b,c=n.call(this),d=c.width,e=c.offset;return e&&(b=Math.floor((a.clientX-e.left)/d*this.sound.duration())),b}function n(){var a=this.subviews.avatars;return{width:a.elWidth,height:a.elHeight,offset:a.offset}}var d,e=a("lib/view"),f=a("lib/timed-comments-state-machine"),g=a("lib/views/mixins/has-hover-intent"),h=a("lib/views/mixins/timed-comments"),i=a("views/sound/comment-avatars-canvas"),j=f.States,k=i.AVATAR_WIDTH;d=c.exports=e.extend(h,g,{css:a("views/sound/waveform-comments.css"),template:a("views/sound/waveform-comments.tmpl"),className:"waveformComments g-box-full",defaults:{sound_id:null,defaultHeight:.5},onMouseMove:function(a){if(!this.subviews.avatars)return;var b=l.call(this,a),c;if(b)this.goToState(j.CURRENT_COMMENT,b,!0);else{c=m.call(this,a);if(!c||c<0||this.sound.duration()<c){this.goToState(j.INITIAL);return}this.goToState(j.CURRENT_TIMESTAMP,c)}},getTemplateData:function(a){return a.upperPartHeightPercent=this.options.defaultHeight*100+"%",a}})}),
define("views/sound/time-indicator",["require","exports","module","_","models/audible","lib/helpers/datetime-helper","lib/view","views/sound/time-indicator.tmpl","views/sound/time-indicator.css"],function(a,b,c){function i(a){var b=a?"on":"off";$(window)[b]("resize",this.onWindowResize),this.model[b]("play",n,this)[b]("pause",o,this)[b]("time finish seeked",k,this)}function j(){if(this.disposed)return;this.elWidth=this.$el.width(),this.totalWidth=this.$$("total").outerWidth()}function k(){window.requestAnimationFrame(function(){l.call(this),m.call(this)}.bind(this))}function l(){if(this.disposed||!this.elWidth)return;var a=this.$$("current"),b=this.elWidth,c=this.model.progress()*b,d=this.totalWidth,e=a.outerWidth(),f=c+e>b-d;this.toggleState("endOfSound",f),a.css({display:"block",left:f?b-d-e+"px":Math.ceil(c)+"px"})}function m(){if(!this.disposed){var a=this.model.currentTime();a=Math.floor(a/1e3+.1)*1e3,this.$$("current").html(g.timecode(a))}}function n(){m.call(this);var a=1e3-this.model.currentTime()%1e3;a<500&&(a+=1e3),clearTimeout(this._timeDisplayTimeout),this._timeDisplayTimeout=setTimeout(n.bind(this),a)}function o(){clearTimeout(this._timeDisplayTimeout),this._timeDisplayTimeout=null}var d,e=a("_"),f=a("models/audible"),g=a("lib/helpers/datetime-helper"),h=a("lib/view");d=c.exports=h.extend({template:a("views/sound/time-indicator.tmpl"),css:a("views/sound/time-indicator.css"),className:"timeIndicator",ModelClass:f,element2selector:{current:".timeIndicator__current",total:".timeIndicator__total"},colorCustomizable:!0,_timeDisplayTimeout:null,_lastContainerSize:-1,setup:function(){this.onWindowResize||(this.onWindowResize=e.debounce(j.bind(this),100)),i.call(this,!0)},dispose:function(){i.call(this,!1)},renderDecorate:function(){!this._timeDisplayTimeout&&this.model.isPlaying()&&n.call(this),this.whenInserted().done(j.bind(this))},teardown:function(){o.call(this)}})}),
define("views/sound/visuals.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visuals{top:0;left:0;right:0;height:100%;width:100%;position:relative}.visuals__item,.visuals__background{position:absolute;top:0;left:0;bottom:0;right:0;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:0}.visuals__background:after{position:absolute;top:0;left:0;display:block;content:'';background:#000;opacity:.6;width:100%;height:100%}.visuals__backgroundLayer{position:absolute;top:0;left:0;background-size:cover;background-position:center;background-repeat:no-repeat}.visuals__backgroundLayerBottom{-webkit-filter:blur(2px);filter:blur(2px)}.visuals__backgroundLayerTop{-webkit-filter:blur(8px);filter:blur(8px);opacity:.9}.visuals__item.visible,.visuals.background .visuals__background{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visuals.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <div class="visuals__item g-transition-opacity" style="background-image: url(',d=a.background_url,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"background_url",{hash:{}})),c+=o(d)+');" data-timestamp="',d=a.timestamp,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"timestamp",{hash:{}})),c+=o(d)+'"></div>\n',c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.visuals,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n<div class="visuals__background g-transition-opacity"> <div class="visuals__backgroundLayer visuals__backgroundLayerBottom g-box-full"></div> <div class="visuals__backgroundLayer visuals__backgroundLayerTop g-box-full"></div>\n</div>\n',f})}),
define("lib/views/image.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e=a.placeholderUrl,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=' <div class="image__full g-opacity-transition" style="background-image: url(\'',e=a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=o(e)+"'); width: ",e=a.width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"width",{hash:{}})),d+=o(e)+"; height: ",e=a.height,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"height",{hash:{}})),d+=o(e)+';"> </div>\n',d}function q(a,b){var c="",d;return c+=' <div class="image__placeholder" style="background-image: url(\'',d=a.placeholderUrl,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"placeholderUrl",{hash:{}})),c+=o(d)+"'); width: ",d=a.width,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"width",{hash:{}})),c+=o(d)+"; height: ",d=a.height,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"height",{hash:{}})),c+=o(d)+';"> </div> ',c}function r(a,b){var d="",e,f;d+=" ",e=a.placeholderUrl,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=' <img src="',e=a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=o(e)+'" width="',e=a.width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"width",{hash:{}})),d+=o(e)+'" height="',e=a.height,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"height",{hash:{}})),d+=o(e)+'" alt="',e=a.altText,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"altText",{hash:{}})),d+=o(e)+'" class="image__full g-transition-opacity">\n',d}function s(a,b){var c="",d;return c+=' <img src="',d=a.placeholderUrl,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"placeholderUrl",{hash:{}})),c+=o(d)+'" width="',d=a.width,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"width",{hash:{}})),c+=o(d)+'" height="',d=a.height,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"height",{hash:{}})),c+=o(d)+'" alt="',d=a.altText,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"altText",{hash:{}})),c+=o(d)+'" class="image__placeholder"> ',c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.backgroundImage,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(4,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/image.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".image{position:relative;width:100%;height:100%;background-color:#f2f2f2;background-image:url(/player/assets/images/default/cloudx200-d1068b51.png);background-position:center center;background-repeat:no-repeat}.image-sound.image-full{background-image:url(/player/assets/images/default/cloud-0f541944.png);background-size:100px 60px}.image__placeholder{position:absolute}.image__full{position:relative;opacity:1}.image__placeholder,.image__full{background-size:cover;background-position:50% 50%}.image.fadeIn>.image__full{opacity:0}.image-20{background-size:20px 20px}.image-20,.image-40{background-image:url(/player/assets/images/default/cloudx40-d1068b51.png)}.image-50{background-image:url(/player/assets/images/default/cloudx50-d1068b51.png)}.image-80{background-image:url(/player/assets/images/default/cloudx80-d1068b51.png)}.image-120{background-image:url(/player/assets/images/default/cloudx120-d1068b51.png)}.image-full{background-image:url(/player/assets/images/default/cloudx500-d1068b51.png)}.image-user.image-20,.image-user.image-40{background-image:url(/player/assets/images/default/userx40-377f1b9e.png)}.image-user.image-50{background-image:url(/player/assets/images/default/userx50-377f1b9e.png)}.image-user.image-80{background-image:url(/player/assets/images/default/userx80-377f1b9e.png)}.image-user.image-120{background-image:url(/player/assets/images/default/userx120-377f1b9e.png)}.image-user,.image-user.image-200{background-image:url(/player/assets/images/default/userx200-377f1b9e.png)}.image-group.image-20,.image-group.image-40{background-image:url(/player/assets/images/default/groupx40-377f1b9e.png)}.image-group.image-50{background-image:url(/player/assets/images/default/groupx50-377f1b9e.png)}.image-group.image-80{background-image:url(/player/assets/images/default/groupx80-377f1b9e.png)}.image-group.image-120{background-image:url(/player/assets/images/default/groupx120-377f1b9e.png)}.image-group,.image-group.image-200{background-image:url(/player/assets/images/default/groupx200-377f1b9e.png)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/skip",["require","exports","module","_","lib/ad-manager","lib/helpers/datetime-helper","models/sound","lib/view","views/ads/skip.tmpl","views/ads/skip.css"],function(a,b,c){function n(){var a=this.model,b=k-a.currentTime();b<1e3?(this.toggleState("disabled",!1),this.model.off("time",m,this),this.getElement("in").text("")):this.getElement("remaining").text(this.options.visual?g.timecode(b):g.timecode(b).slice(-2).replace(/^0/,""))}function o(){var a=this.model;this.getElement("remaining").text(g.timecode(a.duration()-a.currentTime()))}function p(){this.getState("disabled")||f.skip()}var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/helpers/datetime-helper"),h=a("models/sound"),i=a("lib/view"),j=150,k=15e3,l=2500,m;d=c.exports=i.extend({template:a("views/ads/skip.tmpl"),css:a("views/ads/skip.css"),tagName:"button",className:"skipAd sc-button sc-button-small",ModelClass:h,events:{click:p},defaults:{iconColor:"#FFFFFF"},contextName:"ad-skip",setup:function(){this.model.on("time",m,this),this.toggleState("disabled",!0),this.options.visual&&this.toggleState("sc-button-visual",!0),this.skippable=this.model.get("duration")-k>l},dispose:function(){this.model.off("time",m,this)},getTemplateData:function(a){return a.remaining=g.timecode(k),a.skippable=this.skippable,a.nonSkippableLong=!this.skippable&&this.options.visual,a.nonSkippableShort=!this.skippable&&!this.options.visual,a}}),m=e.throttle(function(){if(this.disposed)return;this.skippable?n.call(this):o.call(this)},j)}),
define("views/sound/header.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".soundHeader__playButton{margin-top:3px;margin-right:6px}.soundHeader__title{margin-top:6px}.soundHeader__rightRow{height:22px}.soundHeader__actions,.soundHeader__logo{float:right;position:relative}.soundHeader .soundHeader__likeButton{display:none}.soundHeader.likeVisible .soundHeader__likeButton{display:inline-block}.soundHeader.state-small .soundTitle__title,.soundHeader.state-medium .soundTitle__title{position:absolute;left:49px;right:65px}.soundHeader.visual.state-small .soundTitle__title,.soundHeader.visual.state-medium .soundTitle__title{left:59px}.soundHeader.visual .soundHeader__actions{top:-3px}.soundHeader.visual .soundHeader__logo{right:-1px}.soundHeader__skipAdContainer{position:absolute;top:22px;right:0;z-index:1}.soundHeader.visual .soundHeader__skipAdContainer{top:34px;right:11px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/header.tmpl",["vendor/handlebars-runtime","views/sound/play-button","views/sound/logo","views/buttons/like-button","views/buttons/buy-button","views/buttons/download-button","views/buttons/share-button","views/sound/title"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/like-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="likeButton",f.key=g,g="small",f.size=g,g=a.visual,f.visual=g,g="soundHeader__likeButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function o(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/buy-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function p(a,b){var d="",e,f;d+=" ",e=a.show_download_button,f=c["if"],k=l.program(6,q,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+=" ",d}function q(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/download-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function r(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/share-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g=a.visual,f.visual=g,g=a.show_button_overlay,f.overlay=g,g="soundHeader__shareButton",f.className=g,g="small",f.size=g,g="soundHeader__shareButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="soundHeader__playButton sc-media-left g-transition-opacity"> ',g="views/sound/play-button",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div> <div class="sc-media-right"> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__logo g-transition-opacity"> ',g="views/sound/logo",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.inverse=i,i="logo",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> </div> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__skipAdContainer"></div> <div class="soundHeader__actions g-transition-opacity"> <div class="sc-button-group sc-button-group-pill soundHeader__buttons"> ',g=b.show_like_button,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_buy_button,h=c["if"],k=l.program(3,o,e),k.hash={},k.fn=k,k.inverse=l.program(5,p,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_share_button,h=c["if"],k=l.program(8,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+=' </div> </div> </div>\n</div> <div class="soundHeader__title sc-media-body g-transition-opacity"> ',g="views/sound/title",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.visual=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/sounds-total.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e='.soundsTotal{width:80px;height:80px;padding:12px;overflow:hidden;background:rgba(0,0,0,.8);border-radius:50%;color:#fff;text-align:center;text-transform:uppercase}.soundsTotal.hidden{display:none}.soundsTotal__number{font-size:26px;line-height:1.25}.soundsTotal__tracks{font-size:14px;line-height:1.25}@media (max-height:350px){.soundsTotal{width:50px;height:50px;padding:8px}.soundsTotal__number{font-size:16px}.soundsTotal__tracks{font-size:9px;font-family:"Lucida Grande","Lucida Sans Unicode","Lucida Sans",Garuda,Verdana,Tahoma,sans-serif}}';d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/sounds-total.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;return f+='<div class="soundsTotal__number">',g=b.track_count,h=c.$shortnumber,g=h.call(b,g,{hash:{}}),f+=l(g)+'</div>\n<div class="soundsTotal__tracks">',g="track",h=b.track_count,i=c.$plural,g=i.call(b,h,g,{hash:{}}),f+=l(g)+"</div>\n",f})}),
define("views/sound/thin-progress-bar",["require","exports","module","lib/views/progress-bar","views/sound/thin-progress-bar.tmpl","views/sound/thin-progress-bar.css"],function(a,b,c){var d,e=a("lib/views/progress-bar");d=c.exports=e.extend({template:a("views/sound/thin-progress-bar.tmpl"),css:a("views/sound/thin-progress-bar.css"),className:"thinProgressbar sc-pointer",colorCustomizable:!0,updatePlayed:function(){if(!this.playedProgress)return;this.$$("played")[0].style.width=100*this.playedProgress+"%"}})}),
define("views/ads/ad",["require","exports","module","lib/ad-manager","lib/helpers/image-helper","lib/model","lib/view","views/ads/ad.css","views/ads/ad.tmpl"],function(a,b,c){function i(){this._impressionRecorded&&e.metrics("companion_display:clickthrough")}function j(a){this.$el.toggleClass("imageLoaded",a),a&&!this._impressionRecorded&&(this._impressionRecorded=!0,e.metrics("companion_display:impression"))}var d,e=a("lib/ad-manager"),f=a("lib/helpers/image-helper"),g=a("lib/model"),h=a("lib/view");d=c.exports=h.extend({_impressionRecorded:!1,css:a("views/ads/ad.css"),template:a("views/ads/ad.tmpl"),events:{"click .displayAd__image":i},states:{imageLoaded:j},className:"displayAd",setup:function(){this.model=new g(this.options.companion_display)},renderDecorate:function(){this.addDeferred(f.load(this.model.get("ad_visual"))).then(this.toggleState.bind(this,"imageLoaded",!0))}})}),
define("views/sound/title.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e=a.showH2Link,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=' <span title="',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+'" class="',e=a.inverse,f=c["if"],j=k.program(7,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='">',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+"</span> ",e=a.showH2Link,f=c["if"],j=k.program(9,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function q(a,b){var d="",e,f;d+=' <a href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="sc-link-',e=a.inverse,f=c["if"],j=k.program(3,r,b),j.hash={},j.fn=j,j.inverse=k.program(5,s,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',d}function r(a,b){return"white"}function s(a,b){return"dark"}function t(a,b){return"title__white"}function u(a,b){return" </a> "}function v(a,b){var d="",e,f;d+=" ",e=a.showH1,f=c["if"],j=k.program(12,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" <br> ",e=a.showH2Link,f=c["if"],j=k.program(19,B,b),j.hash={},j.fn=j,j.inverse=k.program(22,D,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function w(a,b){var d="",e,f;d+=" ",e=a.showH1Link,f=c["if"],j=k.program(13,x,b),j.hash={},j.fn=j,j.inverse=k.program(16,z,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" ",d}function x(a,b){var d="",e,f;d+=' <a href="',e=a.h1Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Link",{hash:{}})),d+=o(e)+'" title="',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+'" class="title__h1 sc-truncate sc-link-light g-text-shadow ',e=a.visual,f=c["if"],j=k.program(14,y,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+" </a> ",d}function y(a,b){return"g-text-visual"}function z(a,b){var d="",e,f;d+=' <span title="',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+'" class="title__h1 sc-truncate sc-text-light g-text-shadow ',e=a.visual,f=c["if"],j=k.program(17,A,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+" </span> ",d}function A(a,b){return"g-text-visual"}function B(a,b){var d="",e,f;d+=' <a href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="title__h2 sc-truncate sc-link-dark g-text-shadow ',e=a.visual,f=c["if"],j=k.program(20,C,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+" </a> ",d}function C(a,b){return"g-text-visual"}function D(a,b){var d="",e,f;d+=' <span title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="title__h2 sc-truncate sc-link-dark g-text-shadow ',e=a.visual,f=c["if"],j=k.program(23,E,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='">',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+"</span> ",d}function E(a,b){return"g-text-visual"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.inline,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(11,v,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/title.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".title{font-size:12px;line-height:16px}.title__h1,.title__h2{display:inline-block;max-width:100%;vertical-align:bottom}.title__h1{margin-bottom:1px;font-weight:100}.title__h1:hover{color:#999}.title__white{color:#fff}.title__h2{font-family:'Interstate','Lucida Grande','Lucida Sans Unicode','Lucida Sans',Garuda,Verdana,Tahoma,sans-serif;font-size:14px;line-height:18px;font-weight:400}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork.tmpl",["vendor/handlebars-runtime","lib/views/image","views/buttons/follow-button"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var c="",d;return c+=' <a href="',d=a.permalink_url,typeof d===m?d=d.call(a,{hash:{}}):d===o&&(d=n.call(a,"permalink_url",{hash:{}})),c+=p(d)+'" title="Open SoundCloud page" class="artwork__link">\n',c}function r(a,b){return" </a>\n"}function s(a,b){var d="",e,f,g;return d+=" ",d+=' <div class="artwork__follow g-opacity-transition"> ',e="views/buttons/follow-button",f={},g=a.user,g=g===null||g===undefined||g===!1?g:g.id,f.resource_id=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=p(e)+" </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;g=b.isLink,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="artwork__img",h.className=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.size,h.size=i,i=!0,h.stretch=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+"\n",g=b.isLink,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n",g=b._options,g=g===null||g===undefined||g===!1?g:g.show_follow_button,h=c["if"],k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/artwork.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".artwork__link,.artwork__img,.artwork{display:block;position:relative;height:100%;width:100%}.artwork__userAvatar{width:100%}.artwork__follow{opacity:0;position:absolute;bottom:10px;left:10px}.artwork:hover .artwork__follow{opacity:1;display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("config/waveform-style",["require","exports","module","lib/customization"],function(a,b,c){var d=a("lib/customization"),e=d.getColorParams();c.exports={"default":{background:"#333333",progress:{top:[[0,e.mainColor],[1,e.mainColorShade]],bottom:e.mainColor},seek:e.mainColor,loaded:"#333333"},inverse:{background:"#ffffff",progress:{top:[[0,e.mainColor],[1,e.mainColorShade]],bottom:e.mainColor},seek:e.mainColor,loaded:"#ffffff"}}}),
define("lib/timed-comments-state-machine",["require","exports","module","_","lib/backbone","lib/single","models/sound"],function(a,b,c){var d,e=a("_"),f=a("lib/backbone"),g=a("lib/single"),h=a("models/sound"),i=250,j=3e3,k=1e3,l={INITIAL:"timed-comment-sm:initial",CURRENT_COMMENT:"timed-comment-sm:current-comment",CURRENT_TIMESTAMP:"timed-comment-sm:current-timestamp",ACTIVE_TIMESTAMP:"timed-comment-sm:active-timestamp"};d=function(a,b){this.collection=b,this.collection.on("add",this.onAdd,this).on("remove",this.onRemove,this),this.on(l.INITIAL,this.onInitialState,this).on(l.CURRENT_COMMENT,this.onCurrentComment,this).on(l.CURRENT_TIMESTAMP,this.onCurrentTimestamp,this).on(l.ACTIVE_TIMESTAMP,this.onActiveTimestamp,this),this.sound=new h({id:a}),this.sound.on("time",this.onTime,this)},d.States=l,d.extend=f.Model.extend,e.extend(d.prototype,f.Events,{constructor:d,currentCommentId:null,activeTimestamp:null,currentTimestamp:null,commentQuotaTimeout:null,commentQuotaExceeded:!0,commentIntervalTimeout:null,commentIntervalExceeded:!0,currentState:l.INITIAL,interactingWithComments:!1,dispose:function(){this.off(),this.sound.off("time",this.onTime,this),this.sound.release(),this.collection.off("add",this.onAdd,this).off("remove",this.onRemove,this)},onInitialState:function(){this.activeTimestamp=null,this.currentCommentId=null,this.currentTimestamp=null},onCurrentComment:function(a){this.activeTimestamp=null,this.currentCommentId=a,this.currentTimestamp=null},onCurrentTimestamp:function(a){this.activeTimestamp=null,this.currentCommentId=null,this.currentTimestamp=a},onActiveTimestamp:function(a){this.activeTimestamp=a,this.currentCommentId=null,this.currentTimestamp=null},goToState:function(a){var b=this.canGoToState.apply(this,arguments);return b&&(this.currentState=a,this.trigger.apply(this,arguments)),b},canGoToState:function(a){var b=!1,c=this.activeTimestamp&&this.currentState===l.ACTIVE_TIMESTAMP;switch(a){case l.CURRENT_TIMESTAMP:b=!c;break;case l.CURRENT_COMMENT:b=this.commentIntervalExceeded&&arguments[1]!==this.currentCommentId&&!c;break;case l.INITIAL:b=!0;break;case l.ACTIVE_TIMESTAMP:b=arguments[1]!==this.activeTimestamp}return b},onAdd:function(){this.sound.updateCommentCount(!0)},onRemove:function(){this.sound.updateCommentCount(!1)},onTime:function(){if(this.disposed)return;var a=this.sound.isPlaying(),b;a&&!this.interactingWithComments&&(b=this.collection.commentHeadAt(this.sound.currentTime(),i),b?this.goToState(l.CURRENT_COMMENT,b.id)&&(clearTimeout(this.commentIntervalTimeout),this.commentIntervalExceeded=!1,setTimeout(function(){this.commentIntervalExceeded=!0}.bind(this),k),clearTimeout(this.commentQuotaTimeout),this.commentQuotaExceeded=!1,this.commentQuotaTimeout=setTimeout(function(){this.commentQuotaExceeded=!0,this.onTime()}.bind(this),j)):this.commentQuotaExceeded&&this.goToState(l.INITIAL))}}),c.exports=g.applyTo(d,{cleanupInstantly:!0,hashFn:function(a){return a}})}),
define("lib/views/mixins/timed-comments",["require","exports","module","_","config","lib/mixin","models/sound","lib/timed-comments-state-machine","collections/comment-heads"],function(a,b,c){var d,e=a("_"),f=a("config"),g=a("lib/mixin"),h=a("models/sound"),i=a("lib/timed-comments-state-machine"),j=a("collections/comment-heads"),k=$.noop;d=c.exports=new g({defaults:{onInitialState:k,onActiveTimestamp:k,onCurrentTimestamp:k,onCurrentCommentChange:k},stateMachine:null,applyTo:function(a,b){b=b||{},b.noStateMachine||this.after(a,{setup:function(){var a=i.States;this.stateMachine=new i(this.options.sound_id||this.options.resource_id,this.collection),f.get("widgetParams").show_comments&&this.onState(a.INITIAL,this.onInitialState).onState(a.CURRENT_COMMENT,this.onCurrentCommentChange).onState(a.ACTIVE_TIMESTAMP,this.onActiveTimestamp).onState(a.CURRENT_TIMESTAMP,this.onCurrentTimestamp)}}),this.before(a,{setup:function(){this._stateHandlers={},this.sound=new h({id:this.options.sound_id||this.options.resource_id}),b.noCollection||(this.collection=new j(null,{sound_id:this.sound.id,secret_token:this.sound.get("secret_token")}),this.collection.setLimit(200))}})},before:{dispose:function(){this.sound.release(),delete this.sound;var a=this.stateMachine,b=this;e.each(this._stateHandlers,function(c,d){c.forEach(function(c){a.off(d,c,b)})}),this._stateHandlers={},a&&a.release()}},override:{getCollectionData:function(){return[]}},getCurrentState:function(){return this.stateMachine.currentState},goToState:function(a){var b=this.stateMachine;b.goToState.apply(b,arguments)},interacting:function(a){var b=this.stateMachine;if(e.isUndefined(a))return b.interactingWithComments;b.interactingWithComments=a},onState:function(a,b){return this._stateHandlers[a]=this._stateHandlers[a]||[],this.stateMachine.on(a,b,this),this._stateHandlers[a].push(b),this}})}),
define("views/sound/comment-avatars-canvas",["require","exports","module","_","lib/views/canvas-view","models/comment","lib/helpers/image-helper","lib/views/mixins/timed-comments","views/sound/comment-avatars-canvas.css"],function(a,b,c){function k(){var a=this,b=a.collection.models;$.whenAll(b.filter(p).map(l)).always(function(){if(a.disposed)return;var b=e.toArray(arguments);window.requestAnimationFrame(function(){if(a.disposed)return;b.forEach(function(b){m.apply(a,b)}),o.apply(a),a.toggleState("visible",!0)})})}function l(a){var b=$.Deferred();return h.load(n(a)).always(b.resolve.bind(b,a)),b}function m(a,b){if(!h.isLoaded(b)||this.disposed)return;var c=Math.max(j/2,Math.floor(a.get("timestamp")/this.sound.duration()*this.elWidth)),d=Math.round(this.elHeight*this.options.defaultHeight),e=j,f=j,g=this.context;g.drawImage(b,c-j/2,d,e,f)}function n(a){return h.urlFrom(a.get("user"),j)}function o(){if(this.disposed)return;var a=this.context,b=Math.round(this.elHeight*this.options.defaultHeight),c=2,d=a.createLinearGradient(0,b,0,b+c);d.addColorStop(0,"rgba(0, 0, 0, .4)"),d.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=d,a.fillRect(0,b,this.elWidth,c)}function p(a){return a.get("timestamp")!==g.EMPTY_TIMESTAMP}var d,e=a("_"),f=a("lib/views/canvas-view"),g=a("models/comment"),h=a("lib/helpers/image-helper"),i=a("lib/views/mixins/timed-comments"),j=10;d=c.exports=f.extend(i,{css:a("views/sound/comment-avatars-canvas.css"),defaults:{sound_id:null,defaultHeight:.5},setup:function(){this.$el.addClass("commentAvatarsCanvas g-opacity-transition")},onCanvasInserted:function(){k.call(this)},onCanvasResize:function(){k.call(this)}},{AVATAR_WIDTH:j})}),
define("views/sound/waveform-comments.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveformComments__comment{position:absolute;overflow:visible;width:100%}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/waveform-comments.tmpl",["vendor/handlebars-runtime","views/sound/comment-avatars-canvas","views/comment/comment-view"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression,n="function",o=c.helperMissing,p=void 0;return g="views/sound/comment-avatars-canvas",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.sound_id,h.sound_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.defaultHeight,h.defaultHeight=i,i="avatars",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n<div class="waveformComments__comment" style="top:',g=b.upperPartHeightPercent,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"upperPartHeightPercent",{hash:{}})),f+=m(g)+';"> ',g="views/comment/comment-view",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.sound_id,h.sound_id=i,i="comment",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/time-indicator.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j=this,k=this.escapeExpression;return f+='<div class="timeIndicator__current"></div>\n<div class="timeIndicator__total">',g=b.duration,h=c.$timecode,g=h.call(b,g,{hash:{}}),f+=k(g)+"</div>\n",f})}),
define("views/sound/time-indicator.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".timeIndicator{position:relative;width:100%;height:100%}.timeIndicator__total,.timeIndicator__current{position:absolute;bottom:0;background:rgba(0,0,0,.9);padding:0 2px;font-size:10px;line-height:14px}.timeIndicator__current{display:none;color: $mainColor;border-top-right-radius:3px}.timeIndicator__total{right:0;color:#999;border-top-left-radius:3px}.timeIndicator.endOfSound .timeIndicator__current,.timeIndicator.endOfSound .timeIndicator__total{border-radius:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/skip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+='\nSkip<span class="skipAd__in"> in <span class="skipAd__remaining">',d=a.remaining,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"remaining",{hash:{}})),c+=o(d)+"</span>\n",c}function q(a,b){var c="",d;return c+='\nYour track will start in <span class="skipAd__remaining">',d=a.remaining,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"remaining",{hash:{}})),c+=o(d)+"</span>\n",c}function r(a,b){var c="",d;return c+='\nTrack starts in <span class="skipAd__remaining">',d=a.remaining,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"remaining",{hash:{}})),c+=o(d)+"</span>\n",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<svg width="8px" height="9px" viewBox="0 0 8 9" xmlns="http://www.w3.org/2000/svg"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-421.000000, -41.000000)" fill="',g=b._options,g=g===null||g===undefined||g===!1?g:g.iconColor,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"_options.iconColor",{hash:{}})),f+=o(g)+'"> <g transform="translate(316.000000, 34.000000)"> <path d="M111,7 L111,16 L113,16 L113,7 L111,7 Z M105,16 L105,7 L111,11.5 L105,16 Z" id="skip"></path> </g> </g> </g>\n</svg> ',g=b.skippable,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableLong,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableShort,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+=" ",f})}),
define("views/ads/skip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".skipAd{font-size:12px}.skipAd>svg{margin-right:3px}.skipAd.disabled{opacity:1;cursor:default}.skipAd.disabled>svg{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button",["require","exports","module","_","lib/customization","lib/play-manager","lib/ad-manager","lib/views/mixins/multi-resource-type","config/resources","lib/view","views/sound/play-button.css","views/sound/play-button.tmpl"],function(a,b,c){function l(a){var b=a?"on":"off";g[b]("finish",p,this)[b]("play pause",o,this),h.on("ad:play ad:skip ad:finish",o,this).on("ad:play ad:pause",r,this)}function m(){var a=g.getCurrentSound();a&&a.initAudio()}function n(){this.getState("ad")?h.toggle({userAction:!0}):g.toggle(g.getCurrentSound(),{userAction:!0,view:"play-button"})}function o(){q.call(this)}function p(){if(this.disposed)return;q.call(this)}function q(){var a=g.getCurrentSound(),b=a&&a.isPlaying(),c=h.getCurrentSound(),d=c&&c.isPlaying(),e=a&&(a.isProcessing()||!a.isPlayable()),f=b?"Pause":"Play";this.toggleState("replay",!1).toggleState("playing",b).toggleState("disabled",e).toggleState("ad",d).$el.attr("title",f)}function r(){var a=h.getCurrentSound();this.toggleState("playing",!!a&&!!a.isPlaying())}var d,e=a("_"),f=a("lib/customization"),g=a("lib/play-manager"),h=a("lib/ad-manager"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/view");d=c.exports=k.extend(i,{css:a("views/sound/play-button.css"),template:a("views/sound/play-button.tmpl"),tagName:"button",className:"playButton",colorCustomizable:!0,loadingTemplate:null,events:{click:n,mouseenter:m},defaults:{size:"medium"},setup:function(){l.call(this,!0),this.requiredAttributes=this.requiredAttributes||{},this.requiredAttributes[j.PLAYLIST]=["tracks"],this.observedAttributes=this.observedAttributes||{},this.observedAttributes[j.SOUND]=["playable"],this.$el.toggleClass(this.options.size)},dispose:function(){l.call(this,!1)},renderDecorate:function(){q.call(this)},getTemplateData:function(){return{custom:f.getColorParams(),gradient_id:e.uniqueId("playButton__gradient")}}})}),
define("views/sound/logo",["require","exports","module","_","lib/event-bus","lib/views/mixins/multi-resource-type","lib/views/mixins/responsive","tracking-events","lib/view","views/sound/logo.tmpl"],function(a,b,c){function k(){this.isAudible&&f.trigger("sound:deeplink",this.el,this.model),f.trigger(i.UI.LOGO_LINK_CLICKED,this.model)}function l(){var a=this.model,b=this.isAudible&&a.isPrivate(),c,d;return c=b?a.get("user").permalink_url:a.get("permalink_url"),d=b?"SoundCloud":"Play on SoundCloud",{href:c,title:d}}var d,e=a("_"),f=a("lib/event-bus"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/views/mixins/responsive"),i=a("tracking-events"),j=a("lib/view");d=c.exports=j.extend(h,g,{tagName:"a",template:a("views/sound/logo.tmpl"),className:"logo",requiredAttributes:["permalink_url"],defaults:{inverse:!1},events:{click:k},setup:function(){this.$el.toggleClass("inverse",this.options.inverse)},renderDecorate:function(){this.$el.attr(l.call(this))},getColor:function(){return this.getState("alt")?"#FF5500":"#FFFFFF"},toggleAltColor:function(){this.toggleState("alt")},getTemplateData:function(){return{gradient_id:e.uniqueId("logo_hover_")}}})}),
define("views/buttons/like-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","models/sound-likes","models/playlist-likes","tracking-events","lib/view","config/resources"],function(a,b,c){var d,e=a("lib/action-controller"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("lib/views/mixins/has-tooltip"),i=a("models/sound-likes"),j=a("models/playlist-likes"),k=a("tracking-events"),l=a("lib/view"),m=a("config/resources");d=c.exports=l.extend(f,h,{className:"sc-button-like likeButton",template:function(){return"Like"},defaults:{size:"small",icon_only:!0,resource_id:null},attributes:{title:"Like"},setup:function(){this.options.resource_type===m.PLAYLIST?this.model=new j:this.model=new i,this.observedAttributes=[this.options.resource_id]},renderDecorate:function(){var a=!!this.model.get(this.options.resource_id),b=a?"Liked":"Like";this.toggleState("selected",a),this.$el.attr("title",b).html(b)},onClick:function(a){var b=this.options;g.trigger(k.UI.LIKE_BUTTON_CLICKED,this.model),e.like(b.resource_id,b.resource_type,!this.model.get(b.resource_id)),a.preventDefault()}})}),
define("views/buttons/buy-button",["require","exports","module","models/audible","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","vendor/js-online-stores/online-stores","tracking-events","lib/view"],function(a,b,c){var d,e=a("models/audible"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("lib/views/mixins/has-tooltip"),i=a("vendor/js-online-stores/online-stores"),j=a("tracking-events"),k=a("lib/view");d=c.exports=k.extend(f,h,{tagName:"a",className:"sc-button-buy",defaults:{size:"small",icon_only:!0},ModelClass:e,requiredAttributes:["purchase_url"],template:function(){return""},renderDecorate:function(){var a=this.options.resource_type==="sound",b=this.model,c=i.getPurchaseTitle(b.toJSON(),a?"Buy":"Buy all");this.$el.attr({href:b.get("purchase_url"),title:c}).html(c)},onClick:function(){g.trigger(j.UI.BUY_LINK_CLICKED,this.model)}})}),
define("views/buttons/download-button",["require","exports","module","models/audible","lib/views/mixins/button","config","lib/event-bus","lib/views/mixins/has-tooltip","tracking-events","lib/url","lib/view"],function(a,b,c){var d,e=a("models/audible"),f=a("lib/views/mixins/button"),g=a("config"),h=a("lib/event-bus"),i=a("lib/views/mixins/has-tooltip"),j=a("tracking-events"),k=a("lib/url"),l=a("lib/view");d=c.exports=l.extend(f,i,{tagName:"a",className:"sc-button-download",ModelClass:e,requiredAttributes:["download_url"],defaults:{icon_only:!0},template:function(){return"Download"},renderDecorate:function(){var a=k.modify(this.model.get("download_url"),{query:{client_id:g.get("client_id")}});this.$el.attr({href:a,title:"Download"})},onClick:function(){h.trigger(j.UI.DOWNLOAD_LINK_CLICKED,this.model)}})}),
define("views/buttons/share-button",["require","exports","module","lib/views/mixins/button","lib/views/mixins/has-overlay","lib/views/mixins/has-tooltip","lib/event-bus","views/share/share-panel","tracking-events","lib/views/mixins/multi-resource-type","lib/view"],function(a,b,c){function m(){return this.getState("selected")?"Hide share options":"Share "+(this.isPlaylist?"playlist":"track")}var d,e=a("lib/views/mixins/button"),f=a("lib/views/mixins/has-overlay"),g=a("lib/views/mixins/has-tooltip"),h=a("lib/event-bus"),i=a("views/share/share-panel"),j=a("tracking-events"),k=a("lib/views/mixins/multi-resource-type"),l=a("lib/view");d=c.exports=l.extend(e,f,g,k,{className:"sc-button-share",defaults:{size:"small",icon_only:!0,overlay:!0,ContentViewClass:i,contentViewOptions:{show_embed_options:!1}},states:{"overlay-opened":function(a){this.toggleState("selected",a)}},template:function(){return""},renderDecorate:function(){var a=m.call(this);this.$el.attr("title",a).html(a)},onClick:function(){this.toggleState("selected"),h.trigger(j.UI.SHARE_BUTTON_CLICKED,this.model),this.options.overlay?this.toggleOverlay():this.rerender()}})}),
define("lib/views/progress-bar",["require","exports","module","_","models/audible","lib/view","lib/window-events"],function(a,b,c){var d,e=a("_"),f=a("models/audible"),g=a("lib/view"),h=a("lib/window-events"),i=40;d=c.exports=g.extend({ModelClass:f,_lastContainerSize:-1,_throttleTime:0,_throttleTimeout:0,setup:function(){this.loadedProgress=this._getLoadedProgress(),this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded=!1,e.bindAll(this,"onAudioFinish","updateProgressBar","rethrottle","onInitialPlay","onAudioPlay","onAudioPause","timedUpdate"),h.on("resize:debounced",this.rethrottle,this),this.model.on("finish",this.onAudioFinish).on("time",this.onInitialPlay).on("seeked",this.updateProgressBar)},dispose:function(){this.model.off("finish",this.onAudioFinish).off("time",this.onInitialPlay).off("seeked",this.updateProgressBar),h.off("resize:debounced",this.rethrottle,this)},renderDecorate:function(){this.updateProgressBar(),this.model.on("play",this.onAudioPlay).on("pause",this.onAudioPause),this.model.isPlaying()&&(this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate())},teardown:function(){this.stopTimedUpdates(),this.model.off("play",this.onAudioPlay).off("pause",this.onAudioPause)},onInitialPlay:function(){this.model.off("time",this.onInitialPlay),this.updateProgressBar()},onAudioPause:function(){this.stopTimedUpdates()},onAudioPlay:function(){this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate()},rethrottle:function(){if(this.disposed)return;var a=this.el.clientWidth,b,c;a!==this._lastContainerSize&&(this._lastContainerSize=a,b=this.model.duration(),a===0?(this._throttleTime=0,c=this.whenInserted(),c.state()==="pending"&&c.done(this.rethrottle)):this._throttleTime=Math.max(i,Math.floor(b/a)))},updateLoaded:$.noop,updatePlayed:$.noop,onAudioFinish:function(){this.updateProgressBar()},updateProgressBar:function(){this.disposed||(this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded||(this.loadedProgress=this._getLoadedProgress(),this.isFullyLoaded=this.loadedProgress===1,this.updateLoaded()),this.updatePlayed())},_getLoadedProgress:function(){return this.model.loadProgress()},_getPlayedProgress:function(){return this.model.progress()},timedUpdate:function(){var a=this._throttleTime,b;this.updateProgressBar(),b=Math.max(i,a&&a-this.model.currentTime()%a),this._throttleTimeout=setTimeout(this.timedUpdate,b)},stopTimedUpdates:function(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}})}),
define("views/sound/thin-progress-bar.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="thinProgressbar__layer sc-background-dark"></div>\n<div class="thinProgressbar__layer thinProgressbar__played"></div>\n'})}),
define("views/sound/thin-progress-bar.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e='.thinProgressbar{height:3px;width:100%;position:relative}.thinProgressbar:after{content:"";display:block;position:absolute;height:11px;width:100%;top:-4px;left:0}.thinProgressbar__layer{position:absolute;height:100%;width:100%}.thinProgressbar__played{width:0;background-color: $mainColor}';d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".displayAd{height:100%}.displayAd__visualLink{display:block;height:100%}.displayAd__image{opacity:0;width:100%}.displayAd.imageLoaded .displayAd__image{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <a href="',d=a.landing_page,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"landing_page",{hash:{}})),c+=o(d)+'" class="displayAd__visualLink" >\n',c}function q(a,b){return" </a>\n"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.landing_page,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+=' <img class="displayAd__image g-opacity-transition" src="',g=b.ad_visual,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"ad_visual",{hash:{}})),f+=o(g)+'" />\n',g=b.landing_page,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/buttons/follow-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","models/user","models/followers","models/followings","tracking-events","lib/view","views/buttons/follow-button.tmpl"],function(a,b,c){function m(){return!!this.model.get(this.options.resource_id)}function n(){return!!this.myFollowers.get(this.options.resource_id)}var d,e=a("lib/action-controller"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("models/user"),i=a("models/followers"),j=a("models/followings"),k=a("tracking-events"),l=a("lib/view");d=c.exports=l.extend(f,{ModelClass:j,className:"sc-button-follow sc-button-cta",template:a("views/buttons/follow-button.tmpl"),setup:function(){this.observedAttributes=[this.options.resource_id],this.myFollowers=new i,this.setupModelListeners(this.myFollowers)},dispose:function(){this.teardownModelListeners(this.myFollowers),this.myFollowers.release(),delete this.myFollowers},renderDecorate:function(){var a=m.call(this);this.myFollowers.lastFetchTime||this.myFollowers.fetch(),this.toggleState("selected",a),this.$el.toggleClass("sc-button-cta",!a)},onClick:function(a){var b=new h({id:this.options.resource_id});g.trigger(k.UI.FOLLOW_BUTTON_CLICKED,b),e.follow(this.options.resource_id,!m.call(this)),a.preventDefault()},getTemplateData:function(){var a=m.call(this),b=n.call(this);return{selected:a,followBack:!a&&b}}})}),
define("collections/comment-heads",["require","exports","module","models/comment","lib/collection","models/sound","lib/url","lib/mixins/throws-not-found"],function(a,b,c){var d,e=a("models/comment"),f=a("lib/collection"),g=a("models/sound"),h=a("lib/url"),i=a("lib/mixins/throws-not-found");d=c.exports=f.extend(i.withOptions("__COMMENTS_ARE_DOWN__"),{model:e,soundDuration:null,defaults:{sound_id:null,secret_token:null},baseUrl:function(){return h.stringify({path:["app","widget","tracks",this.options.sound_id,"comments"],query:{filter_replies:1,embed_avatars:0}})},setup:function(){var a=new g({id:this.options.sound_id});a.get("comment_count")===0&&(this.lastFetchTime=Date.now()),this.options.secret_token=a.get("secret_token"),this.soundDuration=a.duration(),a.release()},comparator:function(a,b){return new Date(a.attributes.timestamp)-new Date(b.attributes.timestamp)},commentHeadAt:function(a,b){return b=b||0,this.find(function(c){var d=c.get("timestamp");return b===0?d===a:Math.abs(a-d)<=b&&d!==e.EMPTY_TIMESTAMP})}},{hashFn:function(a,b){return b&&b.sound_id||null}})}),
define("models/comment",["require","exports","module","lib/model","models/user","models/sound"],function(a,b,c){var d,e=a("lib/model"),f=a("models/user"),g=a("models/sound"),h=Infinity;d=c.exports=e.extend({resource_type:"comment",urnPrefix:"soundcloud:comments",parse:function(a){return a.timestamp===null&&(a.timestamp=h),a.user.avatar_url=a.user.avatar_url.replace("http:","https:"),a},submodelMap:{track:g,user:f},baseUrl:function(){return["comments",this.id].join("/")},saveUrl:function(){return["tracks",this.get("track_id"),"comments"].join("/")},destroyUrl:function(){return["tracks",this.get("track_id"),"comments",this.id].join("/")},getAttributesToBeSaved:function(){return{"comment[body]":this.get("body"),"comment[timestamp]":this.get("timestamp")}}},{EMPTY_TIMESTAMP:h})}),
define("views/sound/comment-avatars-canvas.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".commentAvatarsCanvas{opacity:0}.commentAvatarsCanvas.visible{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/comment/comment-view",["require","exports","module","config","views/sound/comment-avatars-canvas","lib/helpers/datetime-helper","lib/play-manager","lib/views/mixins/timed-comments","lib/timed-comments-state-machine","lib/view","views/comment/comment-view.css","views/comment/comment-view.tmpl"],function(a,b,c){function n(a){var b=Math.floor((s.call(this)||0)/1e3),c=this.sound;window.open(this.sound.get("permalink_url")+"#c="+b+"&t="+c.timecode()),h.pause(c),a.preventDefault()}function o(){this.interacting(!0)}function p(){this.interacting(!1),this.goToState(m.INITIAL)}function q(){var a=this.$el.width(),b=s.call(this)/this.sound.get("duration"),c=b<=.5,d=b*a>l?c?b*100+"%":"":l,e=c?"":(1-b)*100+"%",f=Math.floor(a*(c?1-b:b)-20);this.$el.css({left:d,right:e}).toggleClass("left-align",c).toggleClass("right-align",!c),this.$$("body").css("maxWidth",f),this.toggleState("visible",!0)}function r(){return this.collection.get(this.stateMachine.currentCommentId)||null}function s(){var a=r.call(this);return a?a.get("timestamp"):this.stateMachine.currentTimestamp}var d,e=a("config"),f=a("views/sound/comment-avatars-canvas"),g=a("lib/helpers/datetime-helper"),h=a("lib/play-manager"),i=a("lib/views/mixins/timed-comments"),j=a("lib/timed-comments-state-machine"),k=a("lib/view"),l=f.AVATAR_WIDTH,m=j.States;d=c.exports=k.extend(i,{css:a("views/comment/comment-view.css"),template:a("views/comment/comment-view.tmpl"),className:"commentView g-opacity-transition sc-pointer",colorCustomizable:!0,defaults:{avatar_size:20,sound_id:null},events:{click:n,mouseenter:o,mouseleave:p},renderDecorate:function(){var a=this.stateMachine;if(!this.stateMachine.currentCommentId&&!this.stateMachine.currentTimestamp)return;this.toggleState("hint",!!a.currentTimestamp),this.whenInserted().done(q.bind(this))},onCurrentCommentChange:function(){this.rerender()},onCurrentTimestamp:function(a){this.getState("hint")?(this.$$("timestamp").text(g.timecode(a)),q.call(this)):this.rerender()},onInitialState:function(){this.toggleState("visible",!1)},getTemplateData:function(){var a=r.call(this);return{user:a?a.get("user"):e.get("me").toJSON(),comment:a?a.toJSON():null,timestamp:s.call(this)}}})}),
define("views/sound/play-button.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".playButton{position:relative;display:inline-block;width:43px;height:43px;margin:0;padding:0;vertical-align:middle;border:0;background:transparent}.playButton.small{width:20px;height:20px}.playButton:focus{outline:none}.playButton:disabled,.playButton.disabled{opacity:.4}.playButton__play{display:block}.playButton__pause{display:none}.playButton.playing .playButton__play{display:none}.playButton.playing .playButton__pause{display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43 43"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColor,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColor",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> <stop offset="100%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorShade,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorShade",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> </linearGradient> </defs> <circle fill="url(#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+')" stroke="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorDarker,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorDarker",{hash:{}})),f+=m(g)+'" cx="21.5" cy="21.5" r="21"/> <path class="playButton__play" fill="#fff" d="M31,21.5L17,33l2.5-11.5L17,10L31,21.5z"/> <g fill="#fff" class="playButton__pause"> <rect x="15" y="12" width="5" height="19"/> <rect x="23" y="12" width="5" height="19"/> </g>\n</svg>\n',f})}),
define("views/sound/logo.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<style type="text/css"> .logo { display: inline-block; height: 22px; padding: 5px 0; } .logo__path { fill: #999; } .logo.inverse .logo__path { fill: #fff; } .logo.alt .logo__path { fill: #333; } .logo:hover .logo__path { fill: url("#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'"); } .logo.state-small { width: 25px; overflow: hidden; }\n</style>\n<svg xmlns="http://www.w3.org/2000/svg" width="100" height="14"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="#ff7700" stop-opacity="1"/> <stop offset="100%" stop-color="#ff3300" stop-opacity="1"/> </linearGradient> </defs> <path class="logo__path" d="M10.517 3.742c-.323 0-.49.363-.49.582 0 0-.244 3.591-.244 4.641 0 1.602.15 2.621.15 2.621 0 .222.261.401.584.401.321 0 .519-.179.519-.401 0 0 .398-1.038.398-2.639 0-1.837-.153-4.127-.284-4.592-.112-.395-.313-.613-.633-.613zm-1.996.268c-.323 0-.49.363-.49.582 0 0-.244 3.322-.244 4.372 0 1.602.119 2.621.119 2.621 0 .222.26.401.584.401.321 0 .581-.179.581-.401 0 0 .081-1.007.081-2.608 0-1.837-.206-4.386-.206-4.386 0-.218-.104-.581-.425-.581zm-2.021 1.729c-.324 0-.49.362-.49.582 0 0-.272 1.594-.272 2.644 0 1.602.179 2.559.179 2.559 0 .222.229.463.552.463.321 0 .519-.241.519-.463 0 0 .19-.944.19-2.546 0-1.837-.253-2.657-.253-2.657 0-.22-.104-.582-.425-.582zm-2.046-.358c-.323 0-.49.363-.49.582 0 0-.162 1.92-.162 2.97 0 1.602.069 2.496.069 2.496 0 .222.26.557.584.557.321 0 .581-.304.581-.526 0 0 .143-.936.143-2.538 0-1.837-.206-2.96-.206-2.96 0-.218-.198-.581-.519-.581zm-2.169 1.482c-.272 0-.232.218-.232.218v3.982s-.04.335.232.335c.351 0 .716-.832.716-2.348 0-1.245-.436-2.187-.716-2.187zm18.715-.976c-.289 0-.567.042-.832.116-.417-2.266-2.806-3.989-5.263-3.989-1.127 0-2.095.705-2.931 1.316v8.16s0 .484.5.484h8.526c1.655 0 3-1.55 3-3.155 0-1.607-1.346-2.932-3-2.932zm10.17.857c-1.077-.253-1.368-.389-1.368-.815 0-.3.242-.611.97-.611.621 0 1.106.253 1.542.699l.981-.951c-.641-.669-1.417-1.067-2.474-1.067-1.339 0-2.425.757-2.425 1.99 0 1.338.873 1.736 2.124 2.026 1.281.291 1.513.486 1.513.923 0 .514-.379.738-1.184.738-.65 0-1.26-.223-1.736-.777l-.98.873c.514.757 1.504 1.232 2.639 1.232 1.853 0 2.668-.873 2.668-2.163 0-1.477-1.193-1.845-2.27-2.097zm6.803-2.745c-1.853 0-2.949 1.435-2.949 3.502s1.096 3.501 2.949 3.501c1.852 0 2.949-1.434 2.949-3.501s-1.096-3.502-2.949-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.096 0 1.551.94 1.551 2.153.001 1.213-.454 2.153-1.551 2.153zm8.939-1.736c0 1.086-.533 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.897h-1.358v3.916c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.754-1.136 2.754-3.103v-3.897h-1.358v3.916zm8.142-.89l.019 1.485c-.087-.174-.31-.515-.475-.768l-2.703-3.692h-1.362v6.894h1.401v-2.988l-.02-1.484c.088.175.311.514.475.767l2.79 3.705h1.213v-6.894h-1.339v2.975zm5.895-2.923h-2.124v6.791h2.027c1.746 0 3.474-1.01 3.474-3.395 0-2.484-1.437-3.396-3.377-3.396zm-.097 5.472h-.67v-4.152h.719c1.436 0 2.028.688 2.028 2.076 0 1.242-.651 2.076-2.077 2.076zm7.909-4.229c.611 0 1 .271 1.242.737l1.26-.582c-.426-.883-1.202-1.503-2.483-1.503-1.775 0-3.016 1.435-3.016 3.502 0 2.143 1.191 3.501 2.968 3.501 1.232 0 2.047-.572 2.513-1.533l-1.145-.68c-.358.602-.718.864-1.329.864-1.019 0-1.611-.932-1.611-2.153-.001-1.261.583-2.153 1.601-2.153zm5.17-1.192h-1.359v6.791h4.083v-1.338h-2.724v-5.453zm6.396-.157c-1.854 0-2.949 1.435-2.949 3.502s1.095 3.501 2.949 3.501c1.853 0 2.95-1.434 2.95-3.501s-1.097-3.502-2.95-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.095 0 1.55.94 1.55 2.153.001 1.213-.454 2.153-1.55 2.153zm8.557-1.736c0 1.086-.532 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.794h-1.358v3.813c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.755-1.136 2.755-3.103v-3.794h-1.36v3.813zm5.449-3.907h-2.318v6.978h2.211c1.908 0 3.789-1.037 3.789-3.489 0-2.552-1.565-3.489-3.682-3.489zm-.108 5.623h-.729v-4.266h.783c1.565 0 2.21.706 2.21 2.133.001 1.276-.707 2.133-2.264 2.133z"/> </svg>\n',f})}),
define("lib/action-controller",["require","exports","module","_","lib/backbone","lib/connect","models/followers","models/followings","models/groups","models/playlist-likes","models/sound-likes"],function(a,b,c){function n(a){var b=!1,c=a.list,f=a.state,h=a.target,i=a.origin,j=a.requestType,k=i===g.currentUserId(),l,m,o;return m=$.Deferred(),k&&!g.isLoggedIn()?g.login().done(function(){a.origin=g.currentUserId(),n(a).done(m.resolve).fail(m.reject)}).fail(m.reject):(c&&k?(l=function(){c.get(h)!==f?(c.toggle(h,f),f=c.get(h),a.persist&&(o=c.setRemote(h,f,j),o&&o.fail(function(b,c){c!=="abort"&&d.trigger("error",e.extend({xhr:b},a)),n(e.defaults({persist:!1,state:!f},a))}))):b=!0},c.fetch().done(l).done(m.resolve).fail(m.reject)):m.resolve(),m.done(function(){if(!b){var c=a.action;d.trigger([c,c+":origin:"+a.originType+":"+i,c+":target:"+a.targetType+":"+h].join(" "),{state:f,origin:i,originType:a.originType,target:h,targetType:a.targetType,context:a.context})}})),m}var d,e=a("_"),f=a("lib/backbone"),g=a("lib/connect"),h=a("models/followers"),i=a("models/followings"),j=a("models/groups"),k=a("models/playlist-likes"),l=a("models/sound-likes"),m={followings:new i,followers:new h,playlistLikes:new k,soundLikes:new l,groups:new j};d=c.exports=e.extend({},f.Events,{follow:function(a,b,c){var d=g.currentUserId(),f,h;c=e.defaults(c||{},{action:"follow",origin:d,originType:"user",target:a,targetType:"user",state:b,persist:!0}),h=c.origin;if(h===c.target)return;c.target===d?(f=m.followers,f.fetch().done(function(){f.get(h)!==c.state&&(f.toggle(h,c.state),c.state=f.get(h),n(c))})):(c.list=h===d?m.followings:null,n(c))},like:function(a,b,c,d){d=e.defaults(d||{},{action:"like",origin:g.currentUserId(),originType:"user",target:a,targetType:b,state:c,persist:!0,list:b==="playlist"?m.playlistLikes:m.soundLikes}),n(d)},join:function(a,b,c){return c=e.defaults(c||{},{action:"join",origin:g.currentUserId(),originType:"user",target:a,targetType:"group",state:b,persist:!0,list:m.groups}),n(c)}})}),
define("lib/views/mixins/button",["require","exports","module","_","lib/mixin"],function(a,b,c){var d,e=a("_"),f=a("lib/mixin");d=c.exports=new f({applyTo:function(a){a.defaults=e.extend({size:"small",icon_only:!1,visual:!1},a.defaults),a.states=e.extend({active:"sc-button-active",selected:"sc-button-selected"},a.states),a.className=["sc-button",a.className].join(" ").trim(),a.events=e.extend({},a.events,{"click.button":"onClick"})},defaults:{tagName:"button",onClick:$.noop,template:function(){return""},loadingTemplate:null},before:{setup:function(a){this.$el.attr("tabIndex",0).addClass("sc-button-"+a.size).toggleClass("sc-button-icon",a.icon_only).toggleClass("sc-button-visual",a.visual)}}})}),
define("lib/views/mixins/has-tooltip",["require","exports","module","_","lib/views/tooltip","lib/mixin"],function(a,b,c){function h(a){var b=i.call(this),c=this.el.getAttribute("aria-haspopup"),d=this.el.getAttribute("aria-owns");a.type==="mouseenter"&&(!c||d&&!document.getElementById(d))?(this.toggleState("mouseover",!0),b.open()):a.type==="mouseleave"&&(this.toggleState("mouseover",!1),b.close())}function i(){var a=this.subviews.tooltip;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=j.call(this),this.addSubview(a,"tooltip")),this.subviews.tooltip}function j(){var a=new f({togglerEl:this.el,relativeElement:this.el,domId:this.domId,priorityLevel:f.PriorityLevels.LOW});return a}var d,e=a("_"),f=a("lib/views/tooltip"),g=a("lib/mixin");d=c.exports=new g({applyTo:function(a){a.events=e.extend({mouseenter:h,mouseleave:h},a.events)},before:{setup:function(){this.domId=e.uniqueId("tooltip-"),this.$el.attr({"aria-describedby":this.domId})}},after:{renderDecorate:function(){if(this.getState("mouseover")){var a=i.call(this);a.open()}}}})}),
define("models/sound-likes",["require","exports","module","lib/api-wrapper","config","models/sound","models/id-list"],function(a,b,c){var d,e=a("lib/api-wrapper"),f=a("config"),g=a("models/sound"),h=a("models/id-list");d=c.exports=h.extend({baseUrl:function(){return e.EDGE+"me/track_likes/"},onToggle:function(a,b){var c=g.instances.get(a),d=f.get("me");c&&c.likesChanged(b),d&&d.likesChanged(b)}})}),
define("models/playlist-likes",["require","exports","module","lib/api-wrapper","models/id-list"],function(a,b,c){var d,e=a("lib/api-wrapper"),f=a("models/id-list");d=c.exports=f.extend({baseUrl:function(){return e.EDGE+"me/playlist_likes/"}})}),
define("vendor/js-online-stores/online-stores",["require","exports","module"],function(a,b,c){(function(){var a={getPurchaseTitle:function(a,b){var c=a.purchase_url,d=this._shops,e;if(c&&!a.purchase_title)if(d.Flattr.test(c))a.purchase_title="Flattr";else if(d["Getty Images"].test(c))a.purchase_title="License";else{a.purchase_title=b||"Buy";for(e in d)if(d.hasOwnProperty(e)&&d[e].test(c)){a.purchase_title+=" on "+e;break}}return a.purchase_title},getStoreName:function(a){var b=a.purchase_url,c=this._shops,d;if(b)for(var e in c)if(c[e].test(b)){d=e;break}return d},_shops:{Amazon:/ama?zo?n\.(co\.(jp|uk)|com|de|to)/,Beatport:/beatport\.(com|it)/,iTunes:/apple\.com/,Juno:/juno(\.co\.uk|download\.com)/,"Digital Tunes":/digital-tunes\.net/,'zero"':/zero-inch\.com/,trackitdown:/trackitdown\.net/,whatpeopleplay:/whatpeopleplay\.com/,DJdownload:/djdownload\.com/,Minno:/soundra\.in/,Flattr:/flattr\.com/,Ganxy:/ganxy\.com/,"Getty Images":/soundcloud\.(.*-)?gettyimages\.com/}};typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.OnlineStores=a)})()}),
define("lib/views/mixins/has-overlay",["require","exports","module","_","lib/views/dialog","lib/mixin"],function(a,b,c){function h(){var a,b,c,d=this.options;return b=i.call(this,d.ContentViewClass),c=e.extend({resource_id:d.resource_id,resource_type:d.resource_type},d.contentViewOptions),a=new f({togglerEl:this.el,relativeElement:this.el,Subview:b,subviewArgs:c,domId:this.domId,priorityLevel:f.PriorityLevels.HIGH}),a}function i(a){return a?e.isFunction(a.extend)?a:a.call(this):undefined}function j(){var a=this.subviews.overlay;a&&this.toggleState("overlay-opened",a.isOpened)}var d,e=a("_"),f=a("lib/views/dialog"),g=a("lib/mixin");d=c.exports=new g({applyTo:function(a){a.defaults=e.extend({el:null,ContentViewClass:null,contentViewOptions:null},a.defaults)},defaults:{contentView:null,domId:null,toggleOverlay:function(){var a=this.getOverlay();a.isOpened?a.close():a.open()},getOverlay:function(){var a=this.subviews.overlay;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=h.call(this),a.on([f.Events.CLOSED,f.Events.OPENED].join(" "),j,this),this.addSubview(a,"overlay")),this.subviews.overlay}},before:{setup:function(){e.bindAll(this,"toggleOverlay"),this.domId=e.uniqueId("overlay-"),this.$el.attr({"aria-haspopup":"true","aria-owns":this.domId})}}})}),
define("views/share/share-panel",["require","exports","module","lib/views/mixins/multi-resource-type","lib/event-bus","tracking-events","lib/view","views/share/share-panel.css","views/share/share-panel.tmpl"],function(a,b,c){function i(a){a.isTrigger||f.trigger(g.UI.LINK_INPUT_CLICKED,this.model),n(a.target)}function j(a){n(a.target)}function k(a){var b={},c;a.target.checked&&(b.format="wordpress"),c=this.model.getEmbedCode(b),this.$$("embedCodeInput").val(c).click()}function l(){this.toggleState("embed",!1).$$("linkCodeInput").click(),f.trigger(g.UI.LINK_BUTTON_CLICKED,this.model)}function m(){this.toggleState("embed",!0).$$("embedCodeInput").click(),f.trigger(g.UI.EMBED_BUTTON_CLICKED,this.model)}function n(a){a.select()}var d,e=a("lib/views/mixins/multi-resource-type"),f=a("lib/event-bus"),g=a("tracking-events"),h=a("lib/view");d=c.exports=h.extend(e,{css:a("views/share/share-panel.css"),template:a("views/share/share-panel.tmpl"),className:"sharePanel",requiredAttributes:["permalink_url"],events:{"change .sharePanel__wordpress":k,"click  .sharePanel__embedButton":m,"click  .sharePanel__embedCodeInput":j,"click  .sharePanel__linkButton":l,"click  .sharePanel__linkCodeInput":i},defaults:{show_embed_options:!0},states:{embed:"embedCodeVisible"},setup:function(){this.options.show_embed_options=this.isAudible?this.options.show_embed_options:!1,f.trigger(g.UI.SHARE_VIEW_OPENED,this.model)},getTemplateData:function(a){return this.options.show_embed_options&&this.isAudible&&this.model.get("embeddable_by")==="all"&&(a.embed_code=this.model.getEmbedCode()),a.share_url=this.getShareURL(),a}})}),
define("models/followers",["require","exports","module","models/id-list"],function(a,b,c){var d,e=a("models/id-list");d=c.exports=e.extend({baseUrl:function(){return"me/followers/"},setRemote:$.noop})}),
define("models/followings",["require","exports","module","models/id-list"],function(a,b,c){var d,e=a("models/id-list");d=c.exports=e.extend({baseUrl:function(){return"me/followings/"}})}),
define("views/buttons/follow-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function l(a,b){return" Follow back\n"}function m(a,b){var d="",e,f;d+=" ",e=a.selected,f=c["if"],j=k.program(4,n,b),j.hash={},j.fn=j,j.inverse=k.program(6,o,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function n(a,b){return" Following "}function o(a,b){return" Follow "}c=c||a.helpers;var f="",g,h,i,j,k=this;g=b.followBack,h=c["if"],j=k.program(1,l,e),j.hash={},j.fn=j,j.inverse=k.program(3,m,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/comment/comment-view.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".commentView{position:absolute;width:100%;opacity:0}.commentView.visible{opacity:1}.commentView__avatar{position:absolute}.commentView__body{position:absolute;display:inline-block;padding:2px 10px;margin:0;background:#333;color:#e5e5e5;white-space:nowrap;font-size:12px}.commentView.hint .commentView__body{background:#FFF;color:#333}.commentView.right-align .commentView__body{right:10px;text-align:right}.commentView.right-align .commentView__avatar{right:-10px}.commentView.left-align .commentView__avatar{left:-10px}.commentView.left-align .commentView__body{left:10px;text-align:left}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/comment/comment-view.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var c="",d;return c+=" ",d=a.comment,d=d===null||d===undefined||d===!1?d:d.body,typeof d===m?d=d.call(a,{hash:{}}):d===o&&(d=n.call(a,"comment.body",{hash:{}})),c+=p(d)+" ",c}function r(a,b){var d="",e,f;return d+=' Leave a comment at <span class="commentView__timestamp">',e=a.timestamp,f=c.$timecode,e=f.call(a,e,{hash:{}}),d+=p(e)+"</span> ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;g=b.user,h={},i=20,h.size=i,i="commentView__avatar",h["class"]=i,i=c.$image,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+'\n<p class="commentView__body sc-truncate sc-background-darkgrey"> ',g=b.comment,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.program(3,r,e),g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n</p>\n",f})}),
define("models/groups",["require","exports","module","_","lib/connect","models/id-list","lib/url"],function(a,b,c){var d,e=a("_"),f=a("lib/connect"),g=a("models/id-list"),h=a("lib/url");d=c.exports=g.extend({baseUrl:"me/groups",CREATE:"POST",url:function(a,b){var c=e.result(this,"baseUrl");return a&&b==="CREATE"?this.saveUrl(a):a&&b==="DELETE"?this.destroyUrl(a):this.next_href===null?h.modify(c,{query:{representation:"mini",linked_partitioning:1,limit:5e3}}):this.next_href},parse:function(a){var b=a.collection,c={};return this.next_href=a.next_href||!1,b&&b.length&&b.forEach(function(a){c[a.id]=!0}),c},destroyUrl:function(a){return h.joinPath(["groups",a,"members",f.currentUserId()])},saveUrl:function(a){return h.joinPath(["groups",a,"members"])}})}),
define("lib/views/tooltip",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/tooltip.tmpl","lib/views/tooltip.css"],function(a,b,c){var d,e=a("lib/views/mixins/overlay"),f=a("lib/view");d=c.exports=f.extend(e,{template:a("lib/views/tooltip.tmpl"),css:a("lib/views/tooltip.css"),className:"tooltip g-overlay sc-selection-disabled",defaults:{margin:11,collision:"fit",text:null},attributes:{role:"tooltip"},setup:function(){var a=this.options;!a.text&&a.relativeElement&&(a.text=a.relativeElement.title,a.relativeElement.removeAttribute("title"))},closeDecorate:function(){this.toggleState("visible",!1)},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("visible",this.isOpened)}.bind(this))}})}),
define("models/id-list",["require","exports","module","_","lib/connect","lib/event-bus","lib/model","lib/store","lib/url"],function(a,b,c){function k(){var a=this.url();a&&f.isLoggedIn()?h.prototype.fetch.apply(this,arguments).done(k.bind(this)).fail(this._fetchDefer.reject):this._fetchDefer.resolve()}var d,e=a("_"),f=a("lib/connect"),g=a("lib/event-bus"),h=a("lib/model"),i=a("lib/store"),j=a("lib/url");d=c.exports=h.extend({CREATE:"PUT",READ:"GET",DELETE:"DELETE",_currentRequests:null,next_href:null,_fetchDefer:null,readPathSuffix:"ids",setup:function(){this._currentRequests=new i},url:function(a){var b=j.parse(e.result(this,"baseUrl"));b.path=b.path.replace(/\/?$/,"/");if(a)b.path+=a;else if(this.next_href===null)b.path+=this.readPathSuffix,b.query.linked_partitioning=1,b.query.limit=5e3;else return this.next_href;return j.stringify(b)},get:function(){return h.prototype.get.apply(this,arguments)||!1},fetch:function(){return this._fetchDefer||(this._fetchDefer=$.Deferred(),f.isLoggedIn()?k.call(this):g.one("connect:hasUserData",k.bind(this))),this._fetchDefer},parse:function(a){return this.next_href=a.next_href||!1,e.reduce(a.collection,function(a,b){return a[b]=!0,a},{})},toggle:function(a,b){var c=this.get(a),d=typeof b=="boolean"?b:!c;d!==c&&(d?this.set(a,!0):this.unset(a))},setRemote:function(a,b,c){var d,e,f=this._currentRequests.get(a),g;if(!f)return e=c?c:b?"CREATE":"DELETE",d=this.url(a,e),f=$.ajax({url:d,type:this[e],dataType:"json"}),this._currentRequests.set(a,f),g=this,f.always(function(){this._currentRequests.unset(a)}.bind(this)).done(function(){var b=g.get(a);(this.type===g.DELETE&&b||this.type===g.CREATE&&!b)&&g.setRemote(a,b)}),f},hasDataForView:function(){return!!this.lastFetchTime}},{neverRelease:!0,hashFn:function(){return 1}})}),
define("lib/views/dialog",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/dialog.css","lib/views/dialog.tmpl"],function(a,b,c){var d,e=a("lib/views/mixins/overlay"),f=a("lib/view");d=c.exports=f.extend(e,{css:a("lib/views/dialog.css"),template:a("lib/views/dialog.tmpl"),className:"dialog g-overlay",defaults:{margin:11},getOverlayContentEl:function(){return this.$$("content")}})}),
define("views/share/share-panel.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".sharePanel__header{height:32px;margin-bottom:14px}.sharePanel__header,.sharePanel__linkCode,.sharePanel__embedCode{overflow:hidden}.sharePanel__linkCode,.sharePanel.embedCodeVisible .sharePanel__embedCode{display:block}.sharePanel.embedCodeVisible .sharePanel__linkCode,.sharePanel__embedCode{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-panel.tmpl",["vendor/handlebars-runtime","views/share/icons-list"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){return' <div class="sc-media-right"> <button class="sharePanel__embedButton sc-button">Embed</button> </div> '}function r(a,b){var d="",e,f;d+='\n<div class="sharePanel__embedCode sc-media"> <div class="sc-media-right"> <input type="checkbox" id="embed-code-wordpress" class="sharePanel__wordpress"/> <label for="embed-code-wordpress" class="g-label">WordPress</label> <button class="sharePanel__linkActionButton sharePanel__linkButton sc-button">Link</button> </div> ',e=a.embed_code,f=c["if"],k=l.program(4,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n</div>\n",d}function s(a,b){var c="",d;return c+=' <div class="sc-media-body"> <input class="sharePanel__embedCodeInput g-input g-selection" type="text" readonly="readonly" value="',d=a.embed_code,typeof d===m?d=d.call(a,{hash:{}}):d===o&&(d=n.call(a,"embed_code",{hash:{}})),c+=p(d)+'"/> </div> ',c}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div class="sharePanel__header"> <div class="sharePanel__icons sc-left"> ',g="views/share/icons-list",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_id,h.resource_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+' </div>\n</div> <div class="sharePanel__linkCode sc-media"> ',g=b.embed_code,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' <div class="sc-media-body"> <input id="link-code-input" class="sharePanel__linkCodeInput g-input g-selection" type="text" readonly="readonly" value="',g=b.share_url,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"share_url",{hash:{}})),f+=p(g)+'"/> </div>\n</div> ',g=b._options,g=g===null||g===undefined||g===!1?g:g.show_embed_options,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/mixins/overlay",["require","exports","module","_","lib/keys","lib/event-bus","lib/math","lib/mixin"],function(a,b,c){function m(a){var b=a?"on":"off";g[b](j.OPENED,this.onOverlayOpen,this),$(document)[b]("keydown",this.onDocumentKeydown),document[a?"addEventListener":"removeEventListener"]("click",this.onDocumentClick,!0),$(window)[b]("resize",this.onWindowResize)}function n(a,b){var c=b.element.element,d=b.target.element,e=$(window),f=this.$$("arrow"),g=a.top,i=a.left,j="fixed",k=e.width(),l=e.height(),m=c.outerWidth(),n=c.outerHeight(),o=this.options.margin,p=k-m-this.options.margin,q=this.options.margin,r=l-n-this.options.margin;g=h.clamp(g,q,r),i=h.clamp(i,o,p),this.options.relativeElement&&f.length&&this.options.anchor==="center top"&&(f.css({left:d.offset().left-i+d.outerWidth()/2-f.outerWidth()/2,top:-f.outerHeight()}),g+=f.outerHeight()+3),c.css({position:j,top:g,left:i})}function o(a){var b=p(this),c=p(a);return b<c}function p(a){return a.options.priorityLevel||k.MEDIUM}function q(){return!0}var d,e=a("_"),f=a("lib/keys"),g=a("lib/event-bus"),h=a("lib/math"),i=a("lib/mixin"),j={OPENED:"overlay:opened",CLOSED:"overlay:closed"},k={HIGH:1,MEDIUM:2,LOW:3},l=300;d=c.exports=new i({applyTo:function(a){var b=a.constructor;e.extend(b,{Events:j,PriorityLevels:k}),a.defaults=e.defaults(a.defaults||{},{Subview:null,subviewArgs:null,togglerEl:null,relativeElement:null,relativeElementAnchor:"center bottom",anchor:"center top",offset:"0 0",collision:"flip",width:"auto",minHeight:"auto",domId:null,focusable:!0,margin:0,priorityLevel:null}),a.element2selector=e.extend({},a.element2selector,{"last-tabbable":":tabbable:last","first-tabbable":":tabbable:first"})},before:{setup:function(){e.bindAll(this,"onDocumentClick","onDocumentKeydown","onWindowResize"),m.call(this,!0),this.$el.css({outline:"none"}),this.onPositionComplete=n.bind(this)},dispose:function(){m.call(this,!1),this.close()}},defaults:{template:function(){return""},isOpened:!1,open:function(){!this.disposed&&!this.isOpened&&this.canBeOpened()&&(this.isOpened=!0,this.rerender(),this.$el.appendTo(document.body),this.createContentView(),this.position(),this.options.focusable&&this.$el.focus(),this.trigger(j.OPENED),g.trigger(j.OPENED,this))},close:function(a){!this.disposed&&this.isOpened&&(a||this.canBeClosed())&&(this.isOpened=!1,this.$el.detach(),this.closeDecorate(),this.trigger(j.CLOSED))},closeDecorate:$.noop,canBeClosed:q,canBeOpened:q,getContentView:function(){return this.subviews.contentView},createContentView:function(){if(this.getContentView()||!this.options.Subview)return;var a=this.options,b=a.Subview,c=e.result(a,"subviewArgs"),d;d=this.addSubview(new b(e.extend({resource_id:a.resource_id,resource_type:a.resource_type},c)),"contentView"),this.$el.attr({tabindex:"-1",id:this.options.domId||e.uniqueId("overlay_")}),this.getOverlayContentEl().append(d.render().el)},getOverlayContentEl:function(){return this.$el},position:function(){var a=this.options;this.$el.css({width:a.width,minHeight:a.minHeight,position:"fixed"}).position({my:a.anchor,at:a.relativeElementAnchor,of:a.relativeElement,offset:a.offset,collision:a.collision,using:this.onPositionComplete}),this.positionDecorate()},positionDecorate:$.noop,onOverlayOpen:function(a){a.isOpened&&a!==this&&!o.call(this,a)&&this.close(!0)},onDocumentClick:function(a){if(!this.isOpened||$(a.target).closest(this.options.togglerEl).length)return;$(a.target).closest(this.$el).length||this.close()},onDocumentKeydown:function(a){if(!this.isOpened)return;if(a.which===f.ESC){this.close();var b=this._parentView&&this._parentView.$el;b&&b.focus()}else if(a.which===f.TAB){if(!a.shiftKey&&a.target===this.getElement("last-tabbable")[0])return this.getElement("first-tabbable").focus(),!1;if(a.shiftKey&&a.target===this.getElement("first-tabbable")[0])return this.getElement("last-tabbable").focus(),!1}},onWindowResize:e.throttle(function(){!this.disposed&&this.isOpened&&this.position()},l)}})}),
define("lib/views/tooltip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="tooltip__arrow g-arrow g-arrow-top"></div>\n<div class="tooltip__content">',g=b._options,g=g===null||g===undefined||g===!1?g:g.text,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.text",{hash:{}})),f+=m(g)+"</div>\n",f})}),
define("lib/views/tooltip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".tooltip{padding:3px 7px;opacity:0;-webkit-transition:opacity .1s linear;transition:opacity .1s linear;font-size:12px;line-height:15px}.tooltip.visible{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".dialog{padding:10px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="dialog__arrow g-arrow g-arrow-top"></div>\n<div class="dialog__content"></div>\n'})}),
define("views/share/icons-list",["require","exports","module","_","lib/browser","lib/helpers/L10n-helper","lib/views/mixins/multi-resource-type","lib/view","views/share/icons/email","views/share/icons/fb","views/share/icons/google","views/share/icons/line","views/share/icons/mixi","views/share/icons/orkut","views/share/icons/pinterest","views/share/icons/tuenti","views/share/icons/tumblr","views/share/icons/twitter","views/share/icons/vkontakte","views/share/icons/weibo","views/share/icons-list.tmpl","views/share/icons-list.css"],function(a,b,c){var d,e=a("_"),f=a("lib/browser"),g=a("lib/helpers/L10n-helper"),h=a("lib/views/mixins/multi-resource-type"),i=a("lib/view"),j=a("views/share/icons/email"),k=a("views/share/icons/fb"),l=a("views/share/icons/google"),m=a("views/share/icons/line"),n=a("views/share/icons/mixi"),o=a("views/share/icons/orkut"),p=a("views/share/icons/pinterest"),q=a("views/share/icons/tuenti"),r=a("views/share/icons/tumblr"),s=a("views/share/icons/twitter"),t=a("views/share/icons/vkontakte"),u=a("views/share/icons/weibo"),v=[k,s,r,l],w={global:[p],china:[u],brazil:[o],russia:[t],japan:[n],spain:[q]},x=g.isUsedLanguage("zh")?"china":g.isUsedLanguageAndCountry("pt-BR")?"brazil":g.isUsedLanguage("ru")||g.isUsedLanguage("uk")?"russia":g.isUsedLanguage("jp")?"japan":g.isUsedLanguageAndCountry("es-ES")?"spain":"global",y=f.isiOS||f.isAndroid?[j,m]:[j];d=c.exports=i.extend(h,{tagName:"ul",template:a("views/share/icons-list.tmpl"),css:a("views/share/icons-list.css"),className:"shareIcons sc-list-nostyle",getTemplateData:function(a){return e.extend(a,{icons:v.concat(w[x]).concat(y)})}})}),
define("lib/keys",["require","exports","module"],function(a,b,c){c.exports={ALT:18,BACKSPACE:8,CTRL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,INSERT:45,LEFT:37,META:97,PGDOWN:34,PGUP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,COMMA:188}}),
define("lib/helpers/L10n-helper",["require","exports","module"],function(a,b,c){var d,e=(navigator.userLanguage||navigator.language||"").toLowerCase(),f=e.split("-")[0];d=c.exports={isUsedLanguage:function(a){return f===a.toLowerCase()},isUsedLanguageAndCountry:function(a){return e===a.toLowerCase()}}}),
define("views/share/icons/email",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[550,300],serviceKey:"email",serviceName:"Email",opensPopup:!1,hrefTemplate:"mailto:?subject={share_title}%20-%20SoundCloud&body={share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url"),share_title:encodeURIComponent(a.get("title"))}}})}),
define("views/share/icons/fb",["require","exports","module","_","config","views/share/share-icon"],function(a,b,c){var d,e=a("_"),f=a("config"),g=a("views/share/share-icon");d=c.exports=g.extend({defaults:{popupSize:[550,300],serviceKey:"facebook",serviceName:"Facebook",hrefTemplate:"//web.archive.org/web/20141112015650/https://www.facebook.com/dialog/feed?app_id={fb_app_id}&amp;display=popup&amp;redirect_uri={fb_popup_page_url}&amp;link={share_url}"},getHrefData:function(a){return e.extend(a,{fb_app_id:f.get("fb_app_id"),fb_popup_page_url:location.protocol+"//web.archive.org/web/20141112015650/https://soundcloud.com/fb_popup_callback.html"})}})}),
define("views/share/icons/google",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[600,600],serviceKey:"googleplus",serviceName:"Google+",hrefTemplate:"//web.archive.org/web/20141112015650/https://plus.google.com/share?url={share_url}"}})}),
define("views/share/icons/line",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[550,300],serviceKey:"line",serviceName:"Line",hrefTemplate:"https://web.archive.org/web/20141112015650/http://line.me/R/msg/text/?{share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url")}}})}),
define("views/share/icons/mixi",["require","exports","module","config","views/share/share-icon"],function(a,b,c){var d,e=a("config"),f=a("views/share/share-icon");d=c.exports=f.extend({defaults:{popupSize:[650,450],serviceKey:"mixi",serviceName:"mixi",hrefTemplate:"https://web.archive.org/web/20141112015650/http://mixi.jp/share.pl?u={share_url}&amp;k={mixi_api_key}"},getHrefData:function(a){return a.mixi_api_key=e.get("mixi_api_key"),a}})}),
define("views/share/icons/orkut",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[645,450],serviceKey:"orkut",serviceName:"Orkut",hrefTemplate:"https://web.archive.org/web/20141112015650/http://promote.orkut.com/preview?nt=orkut.com&amp;tt={share_title}&amp;du={share_url}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/pinterest",["require","exports","module","lib/helpers/image-helper","views/share/share-icon","lib/url"],function(a,b,c){var d,e=a("lib/helpers/image-helper"),f=a("views/share/share-icon"),g=a("lib/url");d=c.exports=f.extend({defaults:{popupSize:[665,300],serviceKey:"pinterest",serviceName:"Pinterest"},getHref:function(){var a=this.model.toJSON(),b=this.getShareURL(),c=e.urlFrom(a,200),d=this.getShareTitle()+" on SoundCloud";return g.stringify({query:{url:b,media:c,description:d,is_video:"true",utm_source:"soundcloud",utm_campaign:"share",utm_medium:"pinterest",utm_content:b}},"https://web.archive.org/web/20141112015650/http://pinterest.com/pin/create/button/")},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.title="Pin it",a}})}),
define("views/share/icons/tuenti",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[1e3,600],serviceKey:"tuenti",serviceName:"Tuenti",hrefTemplate:"https://web.archive.org/web/20141112015650/http://www.tuenti.com/share?url={share_url}&amp;suggested-text={share_title}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/tumblr",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[450,450],serviceKey:"tumblr",serviceName:"Tumblr",hrefTemplate:"https://web.archive.org/web/20141112015650/http://www.tumblr.com/share/audio?externally_hosted_url={share_url}&tags={tags}"}})}),
define("views/share/icons/twitter",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[700,251],serviceKey:"twitter",serviceName:"Twitter",hrefTemplate:"https://web.archive.org/web/20141112015650/http://twitter.com/share?text={share_title}%20via%20%23soundcloud&amp;url={share_url}"}})}),
define("views/share/icons/vkontakte",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[645,450],serviceKey:"vkontakte",serviceName:"VK",hrefTemplate:"https://web.archive.org/web/20141112015650/http://vkontakte.ru/share.php?url={share_url}"}})}),
define("views/share/icons/weibo",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[450,450],serviceKey:"weibo",serviceName:"Weibo",hrefTemplate:"https://web.archive.org/web/20141112015650/http://service.weibo.com/share/share.php?url={share_url}"}})}),
define("views/share/icons-list.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function m(a,b,d){var e="",f,g,h;return e+=' <li class="shareIcons__icon"> ',f=a,g={},h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_id,g.resource_id=h,h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_type,g.resource_type=h,h=c.$view,j={},j.hash=g,f=h.call(a,f,j),e+=l(f)+" </li>\n",e}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;g=b.icons,h=c.each,j=k.programWithDepth(m,e,b),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/share/icons-list.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcons__icon{float:left;margin:0 4px 0 0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-icon",["require","exports","module","lib/event-bus","lib/helpers/popup-helper","lib/helpers/tag-helper","tracking-events","lib/views/mixins/multi-resource-type","config/resources","lib/utils","lib/view","views/share/share-icon.css","views/share/share-icon.tmpl"],function(a,b,c){function m(){var a=this.getShareURL(),b=this.options;return encodeURIComponent(a+"?utm_source=soundcloud&utm_campaign="+b.campaignName+"&utm_medium="+b.serviceName+"&utm_content="+a)}function n(){var a="",b;return this.isAudible&&(b=this.model.toJSON(),encodeURIComponent(["SoundCloud",b.user.username].concat(g.extract(b).slice(0,4)).join(","))),a}var d,e=a("lib/event-bus"),f=a("lib/helpers/popup-helper"),g=a("lib/helpers/tag-helper"),h=a("tracking-events"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/utils"),l=a("lib/view");d=c.exports=l.extend(i,{className:"shareIcon",css:a("views/share/share-icon.css"),template:a("views/share/share-icon.tmpl"),defaults:{popupSize:null,serviceKey:null,serviceName:null,campaignName:"wtshare",hrefTemplate:null,opensPopup:!0},events:{"click .sc-social-icon":"onIconClick"},onIconClick:function(a){var b=this.options,c=b.popupSize;b.opensPopup&&(a.preventDefault(),f.centered(a.target.getAttribute("href"),c[0],c[1])),e.trigger(h.UI.SHARE_ICON_CLICKED,{model:this.model,shareIconType:this.options.serviceKey})},getHrefData:$.noop,getHref:function(){var a={tags:n.call(this),share_url:m.call(this),share_title:this.getShareTitle()};return k.supplant(this.options.hrefTemplate,this.getHrefData(a)||a)},getShareTitle:function(){var a=[],b=this.model.toJSON();switch(this.options.resource_type){case j.SOUND:case j.PLAYLIST:a=[b.title,"by",b.user.username];break;case j.USER_FAVORITES:a=["Favorite tracks of",b.username];break;case j.USER_SOUNDS:a=["Latest tracks by",b.username];break;case j.GROUP_SOUNDS:a=["Tracks from the",b.name,"group"]}return a.join(" ")},getTemplateData:function(){var a=this.options;return{href:this.getHref(),key:a.serviceKey,title:"Share to "+a.serviceName}}})}),
define("lib/helpers/popup-helper",["require","exports","module"],function(a,b,c){c.exports={centered:function(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}}}),
define("lib/helpers/tag-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={extract:function(a){var b=a.tag_list||"",c=a.genre||"",d=[],e="",f=!1,g=!0,h=/(\w+)\:(\w+)=(.+)/,i,j,k;c&&d.push(c);for(i=0,j=b.length;i<j;++i)k=b.charAt(i),k==='"'?f=!f:k===" "?f?e+=k:g===!1&&(g=!0,d.push(e),e=""):(g=!1,e+=k);return g||d.push(e),d.filter(function(a){return!h.test(a)}).map(function(a){return a.replace(/"/g,"").replace(/\s\s+/," ").trim()}).filter(Boolean)}}}),
define("views/share/share-icon.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcon{display:inline-block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-icon.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<a class="sc-social-icon sc-social-icon-32x32 sc-social-icon-',g=b.key,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"key",{hash:{}})),f+=m(g)+'-32x32 sc-ir" href="',g=b.href,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"href",{hash:{}})),f+=m(g)+'" title="',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+'">',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+"</a>\n",f})})

}
/*
     FILE ARCHIVED ON 01:56:50 Nov 12, 2014 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:40:35 Sep 02, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots.policy: 0.186
  LoadShardBlock: 53.532 (3)
  exclusion.robots: 0.2
  CDXLines.iter: 38.344 (3)
  PetaboxLoader3.resolve: 161.903 (2)
  PetaboxLoader3.datanode: 91.694 (5)
  esindex: 0.014
  load_resource: 221.149
  RedisCDXSource: 1.725
  captures_list: 102.464
*/